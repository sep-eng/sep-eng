<!DOCTYPE html>
<html lang="en">
<head>
  <!--
    SEP + MAKE IT HAPPEN
    Single-page cinematic site with:
    - SEP shop (with translations + cart + MobilePay)
    - About SEP
    - Make It Happen (welcome, login, leaderboard, stats, profile, about)
    - Global home/start screen
    - Global nav with language selector (English, Dansk, Česky)
  -->

  <meta charset="UTF-8" />
  <meta
    name="viewport"
    content="width=device-width, initial-scale=1.0"
  />

  <title>SEP | Your Choice</title>

  <meta
    name="description"
    content="SEP - minimalist clothing made with intention. Plus a simple movement challenge called Make It Happen."
  />

  <link
    rel="icon"
    href="https://upload.wikimedia.org/wikipedia/commons/3/3f/Black_square.jpg"
  />

  <!-- Inter font -->
  <link
    href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap"
    rel="stylesheet"
  />

  <!-- Tailwind CDN -->
  <script src="https://cdn.tailwindcss.com"></script>

  <!-- GSAP + ScrollTrigger (used later in the script) -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/gsap.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/ScrollTrigger.min.js"></script>

  <style>
    /* ---------------------------------------------
       GLOBAL BASE STYLES
       --------------------------------------------- */

    * {
      box-sizing: border-box;
    }

    body {
      font-family: 'Inter', sans-serif;
      background: linear-gradient(to bottom, #000000, #ffffff);
      color: #111111;
      scroll-behavior: smooth;
      margin: 0;
      padding: 0;
      min-height: 100vh;
    }

    h1,
    h2,
    h3,
    p,
    button,
    a,
    span,
    select,
    input {
      transition:
        color 0.35s,
        background-color 0.35s,
        border-color 0.35s,
        transform 0.20s,
        box-shadow 0.20s;
    }

    button,
    a {
      cursor: pointer;
    }

    button:focus,
    a:focus,
    input:focus,
    select:focus {
      outline: 2px solid rgba(255, 255, 255, 0.6);
      outline-offset: 2px;
    }

    button:hover,
    a:hover {
      transform: translateY(-1px);
    }

    .theme-text {
      color: #e5e7eb;
    }

    .fade-section {
      opacity: 0;
      transform: translateY(30px);
    }

    /* ---------------------------------------------
       POPUP NOTIFICATIONS (cart + order message)
       --------------------------------------------- */

    .popup {
      position: fixed;
      top: 20px;
      right: 20px;
      background: #16a34a;
      color: #ffffff;
      padding: 10px 16px;
      border-radius: 8px;
      opacity: 0;
      transition: opacity 0.3s;
      z-index: 100;
      font-size: 13px;
      box-shadow: 0 12px 30px rgba(0, 0, 0, 0.45);
    }

    .popup.show {
      opacity: 1;
    }

    /* ---------------------------------------------
       SCENES
       --------------------------------------------- */

    .scene {
      display: none;
    }

    .scene.active {
      display: block;
    }

    .scene-exit-bar {
      position: sticky;
      top: 0;
      z-index: 40;
      backdrop-filter: blur(10px);
      background: linear-gradient(
        to bottom,
        rgba(0, 0, 0, 0.75),
        rgba(0, 0, 0, 0.0)
      );
    }

    .scene-exit-inner {
      max-width: 1200px;
      margin: 0 auto;
      padding: 10px 16px;
      display: flex;
      justify-content: flex-start;
    }

    .scene-exit-button {
      font-size: 11px;
      border-radius: 9999px;
      border-width: 1px;
      padding: 4px 10px;
      background-color: rgba(0, 0, 0, 0.7);
      color: #f9fafb;
      border-color: rgba(255, 255, 255, 0.25);
    }

    /* ---------------------------------------------
       GLOBAL FLOATING NAV
       --------------------------------------------- */

    #globalNavButtons {
      position: fixed;
      top: 10px;
      right: 12px;
      z-index: 70;
      display: flex;
      flex-direction: column;
      gap: 6px;
    }

    .nav-toggle-btn {
      background: rgba(0, 0, 0, 0.85);
      color: #ffffff;
      border-radius: 9999px;
      padding: 6px 10px;
      font-size: 10px;
      border: 1px solid rgba(255, 255, 255, 0.3);
      display: flex;
      align-items: center;
      gap: 6px;
      box-shadow: 0 10px 25px rgba(0, 0, 0, 0.4);
    }

    .nav-toggle-btn span.nav-label {
      text-transform: uppercase;
      letter-spacing: 0.14em;
    }

    .nav-lines {
      display: inline-block;
      width: 14px;
      height: 10px;
      position: relative;
    }

    .nav-lines span {
      position: absolute;
      left: 0;
      right: 0;
      height: 2px;
      background: #ffffff;
      border-radius: 999px;
    }

    .nav-lines span:nth-child(1) {
      top: 0;
    }

    .nav-lines span:nth-child(2) {
      top: 4px;
    }

    .nav-lines span:nth-child(3) {
      top: 8px;
    }

    #navMenu {
      margin-top: 4px;
      background: rgba(0, 0, 0, 0.90);
      border-radius: 9999px;
      padding: 5px 8px;
      border: 1px solid rgba(255, 255, 255, 0.25);
      display: none;
      flex-direction: column;
      gap: 4px;
      min-width: 210px;
    }

    #navMenu.show {
      display: flex;
    }

    .nav-menu-row {
      display: flex;
      flex-wrap: nowrap;
      gap: 6px;
      align-items: center;
      justify-content: flex-start;
    }

    #navMenu button.nav-link-btn {
      font-size: 10px;
      padding: 4px 10px;
      border-radius: 9999px;
      border: 1px solid rgba(255, 255, 255, 0.2);
      background: transparent;
      color: #f3f4f6;
      white-space: nowrap;
    }

    #navMenu button.nav-link-btn:hover {
      background: rgba(255, 255, 255, 0.06);
    }

    .nav-language-label {
      font-size: 9px;
      color: #d1d5db;
      text-transform: uppercase;
      letter-spacing: 0.14em;
      white-space: nowrap;
    }

    .lang-btn {
      font-size: 10px;
      padding: 3px 9px;
      border-radius: 9999px;
      border: 1px solid rgba(255, 255, 255, 0.25);
      background: transparent;
      color: #e5e7eb;
      white-space: nowrap;
    }

    .lang-btn.active {
      background: #ffffff;
      color: #111827;
    }

    /* ---------------------------------------------
       HOME / START SCREEN
       --------------------------------------------- */

    .home-gradient-overlay {
      background: radial-gradient(
          circle at top,
          rgba(255, 255, 255, 0.12),
          transparent 55%
        ),
        radial-gradient(
          circle at bottom,
          rgba(0, 0, 0, 0.8),
          transparent 55%
        );
    }

    .home-card {
      border-radius: 24px;
      border: 1px solid rgba(255, 255, 255, 0.12);
      background: linear-gradient(
        135deg,
        rgba(15, 23, 42, 0.9),
        rgba(15, 23, 42, 0.6)
      );
      box-shadow: 0 24px 60px rgba(0, 0, 0, 0.65);
      overflow: hidden;
    }

    .home-card-header {
      border-bottom: 1px solid rgba(148, 163, 184, 0.4);
    }

    .home-pill {
      border-radius: 9999px;
      font-size: 11px;
      padding: 4px 10px;
      border: 1px solid rgba(148, 163, 184, 0.7);
      color: #e5e7eb;
    }

    /* ---------------------------------------------
       SEP SHOP - PRODUCT CARDS + CART
       --------------------------------------------- */

    .product-card {
      background: rgba(255, 255, 255, 0.08);
      border-radius: 18px;
      box-shadow: 0 18px 45px rgba(0, 0, 0, 0.65);
      backdrop-filter: blur(16px);
      border: 1px solid rgba(255, 255, 255, 0.16);
    }

    .product-card img {
      border-radius: 14px;
    }

    .quantity-selector {
      text-align: center;
      font-size: 14px;
    }

    .add-button {
      border-radius: 9999px;
      font-size: 14px;
      padding: 7px 18px;
    }

    #cartSidebar {
      color: #000000;
      transition:
        transform 0.3s,
        background-color 0.35s,
        color 0.35s;
    }

    #cartSidebar {
      position: fixed;
      top: 0;
      right: 0;
      height: 100%;
      width: 320px;
      max-width: 100%;
      background: #ffffff;
      box-shadow: -18px 0 40px rgba(0, 0, 0, 0.45);
      transform: translateX(100%);
      z-index: 60;
      overflow-y: auto;
    }

    #cartOverlay {
      position: fixed;
      inset: 0;
      background: rgba(0, 0, 0, 0.55);
      z-index: 50;
      display: none;
    }

    #cartOverlay.show {
      display: block;
    }

    .hidden-while-cart {
      transition: opacity 0.25s;
    }

    /* ---------------------------------------------
       MIH CARD (used later)
       --------------------------------------------- */

    .mih-card {
      background: rgba(15, 23, 42, 0.9);
      border-radius: 20px;
      border: 1px solid rgba(148, 163, 184, 0.35);
      box-shadow: 0 22px 55px rgba(0, 0, 0, 0.75);
    }

    /* ---------------------------------------------
       SIMPLE PROFILE LABELS (MIH PROFILE)
       --------------------------------------------- */

    .profile-label {
      font-size: 11px;
      text-transform: uppercase;
      letter-spacing: 0.08em;
      color: #9ca3af;
    }

    .profile-value {
      font-size: 14px;
      color: #e5e7eb;
    }
  </style>
</head>

<body class="text-white">

  <!-- =========================================================
       GLOBAL FLOATING MENU (visible on all scenes)
       ========================================================= -->
  <div
    id="globalNavButtons"
    class="hidden-while-cart"
  >
    <!-- Main hamburger button -->
    <button
      id="mainNavToggle"
      type="button"
      class="nav-toggle-btn"
      aria-label="Toggle main menu"
    >
      <span class="nav-lines" aria-hidden="true">
        <span></span>
        <span></span>
        <span></span>
      </span>
      <span class="nav-label" data-i18n="nav_menu_label">
        Menu
      </span>
    </button>

    <!-- Dropdown menu -->
    <div id="navMenu">
      <!-- Row: section links -->
      <div class="nav-menu-row">
        <button
          type="button"
          class="nav-link-btn"
          data-i18n="nav_home"
          onclick="showScene('home')"
        >
          Home
        </button>

        <button
          type="button"
          class="nav-link-btn"
          data-i18n="nav_sep_shop"
          onclick="showScene('sep-shop')"
        >
          SEP shop
        </button>

        <button
          type="button"
          class="nav-link-btn"
          data-i18n="nav_sep_about"
          onclick="showScene('sep-about')"
        >
          About SEP
        </button>
      </div>

      <div class="nav-menu-row">
        <button
          type="button"
          class="nav-link-btn"
          data-i18n="nav_mih_welcome"
          onclick="showScene('mih-welcome')"
        >
          Make It Happen
        </button>

        <button
          type="button"
          class="nav-link-btn"
          data-i18n="nav_mih_about"
          onclick="showScene('mih-about')"
        >
          About Make It Happen
        </button>
      </div>

      <!-- Row: language selector -->
      <div class="nav-menu-row mt-1">
        <span
          class="nav-language-label"
          data-i18n="nav_language_label"
        >
          Language
        </span>

        <button
          type="button"
          class="lang-btn"
          data-lang="en"
        >
          English
        </button>

        <button
          type="button"
          class="lang-btn"
          data-lang="da"
        >
          Dansk
        </button>

        <button
          type="button"
          class="lang-btn"
          data-lang="cs"
        >
          Česky
        </button>
      </div>
    </div>
  </div>

  <!-- =========================================================
       HOME / START SCREEN
       ========================================================= -->
  <section
    id="scene-home"
    class="scene active"
  >
    <div
      class="min-h-screen home-gradient-overlay flex items-center justify-center px-4 py-12"
    >
      <div
        class="home-card max-w-5xl w-full text-white"
      >
        <!-- Header row -->
        <div
          class="home-card-header px-6 md:px-10 py-4 flex items-center justify-between gap-4"
        >
          <div class="flex items-center gap-3">
            <div
              class="w-8 h-8 rounded-full bg-white flex items-center justify-center text-black text-xs font-semibold"
            >
              SEP
            </div>
            <div>
              <div
                class="text-[10px] tracking-[0.35em] uppercase text-gray-400"
              >
                Se Proairesis
              </div>
              <div
                class="text-xs text-gray-400"
              >
                Your choice. Your pace.
              </div>
            </div>
          </div>

          <div class="hidden md:flex gap-2">
            <div class="home-pill">
              Minimalist clothing
            </div>
            <div class="home-pill">
              Movement challenge
            </div>
          </div>
        </div>

        <!-- Main content -->
        <div
          class="px-6 md:px-10 py-8 md:py-12 grid md:grid-cols-2 gap-10"
        >
          <!-- Left: main hero copy -->
          <div class="space-y-5">
            <h1
              class="text-3xl md:text-4xl font-semibold tracking-tight"
              data-i18n="home_title"
            >
              A small brand, a simple challenge.
            </h1>

            <p
              class="text-sm md:text-base text-gray-200"
              data-i18n="home_intro"
            >
              SEP is a quiet clothing brand from Copenhagen.
              Make It Happen is a small health challenge that
              lives in the same place. No noise. No fuss.
            </p>

            <p
              class="text-xs md:text-sm text-gray-400 max-w-md"
              data-i18n="home_privacy_note"
            >
              Everything here runs in your browser. No accounts on
              servers. No tracking across the internet. Just simple
              tools that help you choose what matters.
            </p>

            <div class="flex flex-wrap gap-3">
              <button
                type="button"
                onclick="showScene('sep-shop')"
                class="px-5 py-2 rounded-full bg-white text-black text-xs md:text-sm font-medium"
                data-i18n="home_primary_sep"
              >
                Go to SEP shop
              </button>

              <button
                type="button"
                onclick="showScene('mih-welcome')"
                class="px-5 py-2 rounded-full border border-gray-400/80 text-xs md:text-sm text-gray-100"
                data-i18n="home_primary_mih"
              >
                Go to Make It Happen
              </button>
            </div>
          </div>

          <!-- Right: two focus blocks -->
          <div class="space-y-5">
            <!-- SEP block -->
            <div
              class="rounded-2xl border border-white/15 bg-white/5 p-5 flex flex-col gap-3"
            >
              <div class="flex items-center justify-between gap-3">
                <h2
                  class="text-sm font-semibold tracking-[0.18em] uppercase text-gray-200"
                  data-i18n="home_sep_heading"
                >
                  SEP - CLOTHING
                </h2>
                <span
                  class="text-[11px] text-gray-400"
                  data-i18n="home_sep_location"
                >
                  Hand pressed in Copenhagen
                </span>
              </div>

              <p
                class="text-xs text-gray-300"
                data-i18n="home_sep_copy"
              >
                Three pieces. One choice. A white T shirt, a black hoodie
                and black trousers that work with almost everything.
              </p>

              <div class="flex flex-wrap gap-2 mt-1">
                <span class="home-pill text-[11px]">
                  180 kr per item
                </span>
                <span class="home-pill text-[11px]">
                  Free shipping in Copenhagen
                </span>
              </div>

              <button
                type="button"
                onclick="showScene('sep-shop')"
                class="mt-3 inline-flex items-center gap-2 px-4 py-2 rounded-full bg-white text-black text-xs font-medium"
                data-i18n="home_sep_cta"
              >
                Enter SEP shop
                <span aria-hidden="true">→</span>
              </button>
            </div>

            <!-- MIH block -->
            <div
              class="rounded-2xl border border-sky-500/40 bg-slate-900/90 p-5 flex flex-col gap-3"
            >
              <div class="flex items-center justify-between gap-3">
                <h2
                  class="text-sm font-semibold tracking-[0.18em] uppercase text-gray-100"
                  data-i18n="home_mih_heading"
                >
                  MAKE IT HAPPEN
                </h2>
                <span
                  class="text-[11px] text-gray-400"
                  data-i18n="home_mih_tag"
                >
                  Run. Walk. Cycle.
                </span>
              </div>

              <p
                class="text-xs text-gray-300"
                data-i18n="home_mih_copy"
              >
                Log your distance and time. Watch your stats grow.
                Climb the leaderboard in your league at your own speed.
              </p>

              <div class="flex flex-wrap gap-2 mt-1">
                <span class="home-pill text-[11px]">
                  Healthy
                </span>
                <span class="home-pill text-[11px]">
                  Free
                </span>
                <span class="home-pill text-[11px]">
                  Fun
                </span>
              </div>

              <button
                type="button"
                onclick="showScene('mih-welcome')"
                class="mt-3 inline-flex items-center gap-2 px-4 py-2 rounded-full border border-sky-400/70 text-xs font-medium text-sky-100"
                data-i18n="home_mih_cta"
              >
                Enter Make It Happen
                <span aria-hidden="true">→</span>
              </button>
            </div>
          </div>
        </div>

        <!-- Bottom line -->
        <div
          class="px-6 md:px-10 pb-5 flex flex-wrap items-center gap-3 text-[11px] text-gray-400 border-t border-white/10"
        >
          <span data-i18n="home_footer_line">
            No accounts on a server. No ad pixels. Just your browser and a few small scripts.
          </span>
        </div>
      </div>
    </div>
  </section>

  <!-- =========================================================
       SEP SHOP SCENE
       ========================================================= -->
  <section
    id="scene-sep-shop"
    class="scene"
  >
    <!-- Exit bar back to home -->
    <div class="scene-exit-bar">
      <div class="scene-exit-inner">
        <button
          type="button"
          class="scene-exit-button"
          onclick="showScene('home')"
          data-i18n="exit_to_home"
        >
          Back to home
        </button>
      </div>
    </div>

    <!-- Hero -->
    <header
      class="py-20 text-center fade-section"
    >
      <h1
        class="theme-text text-4xl md:text-5xl font-bold mb-4"
        data-i18n="sep_hero_title"
      >
        Minimalist clothing made with intention.
      </h1>

      <p
        class="theme-text text-base md:text-lg mb-8 max-w-xl mx-auto"
        data-i18n="sep_hero_subtitle"
      >
        Soft, clean and hand pressed in Copenhagen. Three pieces that keep
        your wardrobe calm instead of crowded.
      </p>

      <div
        id="sepHeroButtons"
        class="flex justify-center gap-4 hidden-while-cart"
      >
        <a
          href="#sep-products"
          class="bg-white text-black px-6 py-3 rounded-full font-medium text-sm"
          data-i18n="sep_hero_shop_now"
        >
          Shop now
        </a>

        <button
          id="viewCartBtn"
          type="button"
          class="border border-white text-white px-6 py-3 rounded-full font-medium text-sm relative"
        >
          <span data-i18n="sep_hero_view_cart">
            View cart
          </span>

          <span
            id="cartCounter"
            class="absolute -top-2 -right-2 bg-red-600 text-white rounded-full w-6 h-6 flex items-center justify-center text-xs hidden"
          >
            0
          </span>
        </button>
      </div>
    </header>

    <!-- Products -->
    <section
      id="sep-products"
      class="py-16 md:py-20 px-6 fade-section"
    >
      <div class="text-center mb-10 md:mb-12">
        <h2
          class="theme-text text-3xl md:text-4xl font-bold mb-3"
          data-i18n="sep_products_title"
        >
          Three products. One choice.
        </h2>

        <p
          class="theme-text text-sm md:text-base"
          data-i18n="sep_products_subtitle"
        >
          Simple pieces that feel good to wear and do not shout for attention.
        </p>
      </div>

      <div
        class="grid grid-cols-1 md:grid-cols-3 gap-8 max-w-6xl mx-auto"
      >
        <!-- White T shirt -->
        <div class="product-card p-6 text-center">
          <img
            src="https://images.pexels.com/photos/1002638/pexels-photo-1002638.jpeg?auto=compress&cs=tinysrgb&w=1200"
            alt="White T shirt"
            class="w-full h-64 object-cover mb-4"
          />
          <h3
            class="text-lg md:text-xl font-semibold mb-1"
            data-i18n="sep_product_tshirt_name"
          >
            SEP White T shirt
          </h3>
          <p class="mb-2 text-sm">
            <span data-i18n="sep_price_prefix">
              Price
            </span>
            :
            <span>180 kr.</span>
          </p>

          <select
            class="theme-text border border-white/40 rounded px-3 py-2 mb-3 bg-transparent text-sm w-full"
            aria-label="Choose size"
          >
            <option>XS</option>
            <option>S</option>
            <option>M</option>
            <option>L</option>
            <option>XL</option>
          </select>

          <div class="flex justify-center gap-2 items-center">
            <input
              type="number"
              min="1"
              value="1"
              class="theme-text border border-white/40 rounded w-16 bg-transparent quantity-selector"
            />
            <button
              type="button"
              class="add-button bg-white text-black font-medium add-to-cart"
              data-product-name="SEP White T shirt"
              data-product-price="180"
              data-i18n="sep_add_to_cart"
            >
              Add
            </button>
          </div>
        </div>

        <!-- Black Hoodie -->
        <div class="product-card p-6 text-center">
          <img
            src="https://images.pexels.com/photos/7671166/pexels-photo-7671166.jpeg?auto=compress&cs=tinysrgb&w=1200"
            alt="Black hoodie"
            class="w-full h-64 object-cover mb-4"
          />
          <h3
            class="text-lg md:text-xl font-semibold mb-1"
            data-i18n="sep_product_hoodie_name"
          >
            SEP Black Hoodie
          </h3>
          <p class="mb-2 text-sm">
            <span data-i18n="sep_price_prefix">
              Price
            </span>
            :
            <span>180 kr.</span>
          </p>

          <select
            class="theme-text border border-white/40 rounded px-3 py-2 mb-3 bg-transparent text-sm w-full"
            aria-label="Choose size"
          >
            <option>XS</option>
            <option>S</option>
            <option>M</option>
            <option>L</option>
            <option>XL</option>
          </select>

          <div class="flex justify-center gap-2 items-center">
            <input
              type="number"
              min="1"
              value="1"
              class="theme-text border border-white/40 rounded w-16 bg-transparent quantity-selector"
            />
            <button
              type="button"
              class="add-button bg-white text-black font-medium add-to-cart"
              data-product-name="SEP Black Hoodie"
              data-product-price="180"
              data-i18n="sep_add_to_cart"
            >
              Add
            </button>
          </div>
        </div>

        <!-- Black Trousers -->
        <div class="product-card p-6 text-center">
          <img
            src="https://images.pexels.com/photos/7671153/pexels-photo-7671153.jpeg?auto=compress&cs=tinysrgb&w=1200"
            alt="Black trousers"
            class="w-full h-64 object-cover mb-4"
          />
          <h3
            class="text-lg md:text-xl font-semibold mb-1"
            data-i18n="sep_product_trousers_name"
          >
            SEP Black Trousers
          </h3>
          <p class="mb-2 text-sm">
            <span data-i18n="sep_price_prefix">
              Price
            </span>
            :
            <span>180 kr.</span>
          </p>

          <select
            class="theme-text border border-white/40 rounded px-3 py-2 mb-3 bg-transparent text-sm w-full"
            aria-label="Choose size"
          >
            <option>XS</option>
            <option>S</option>
            <option>M</option>
            <option>L</option>
            <option>XL</option>
          </select>

          <div class="flex justify-center gap-2 items-center">
            <input
              type="number"
              min="1"
              value="1"
              class="theme-text border border-white/40 rounded w-16 bg-transparent quantity-selector"
            />
            <button
              type="button"
              class="add-button bg-white text-black font-medium add-to-cart"
              data-product-name="SEP Black Trousers"
              data-product-price="180"
              data-i18n="sep_add_to_cart"
            >
              Add
            </button>
          </div>
        </div>
      </div>
    </section>

    <!-- Cart Sidebar -->
    <aside id="cartSidebar">
      <div class="p-6">
        <div
          class="flex items-center justify-between mb-4"
        >
          <h3
            class="text-lg font-semibold"
            data-i18n="cart_title"
          >
            Your cart
          </h3>
          <button
            id="closeCart"
            type="button"
            aria-label="Close cart"
            class="text-gray-600 hover:text-black"
          >
            ✕
          </button>
        </div>

        <!-- Shipping choice -->
        <div class="mb-4 text-sm">
          <p
            class="mb-1 font-medium"
            data-i18n="cart_shipping_label"
          >
            Shipping destination
          </p>

          <div class="flex gap-2 text-xs">
            <button
              id="shippingCph"
              type="button"
              class="px-3 py-1 rounded-full border border-gray-400 bg-gray-200"
              data-i18n="cart_shipping_cph"
            >
              Copenhagen
            </button>

            <button
              id="shippingNonCph"
              type="button"
              class="px-3 py-1 rounded-full border border-gray-400 bg-transparent"
              data-i18n="cart_shipping_rest"
            >
              Rest of Denmark
            </button>
          </div>

          <p
            class="mt-1 text-gray-500 text-xs"
            data-i18n="cart_shipping_help"
          >
            Copenhagen is free. Rest of Denmark adds 45 kr.
          </p>
        </div>

        <!-- Cart items -->
        <div
          id="cartItems"
          class="space-y-4 text-sm"
        >
          <!-- Filled by JS -->
        </div>

        <!-- Totals + MobilePay -->
        <div
          class="border-t border-gray-300 pt-4 mt-4 text-sm"
        >
          <div class="flex justify-between mb-1">
            <span data-i18n="cart_subtotal">
              Subtotal
            </span>
            <span
              id="cartSubtotal"
              class="font-semibold"
            >
              0 kr.
            </span>
          </div>

          <div
            class="flex justify-between mb-2 text-xs text-gray-600"
          >
            <span data-i18n="cart_shipping">
              Shipping
            </span>
            <span
              id="cartShippingLabel"
            >
              +45 kr.
            </span>
          </div>

          <div
            class="flex justify-between font-semibold border-t border-gray-300 pt-2 mb-3"
          >
            <span data-i18n="cart_total">
              Total
            </span>
            <span id="cartTotal">
              45 kr.
            </span>
          </div>

          <button
            id="openMobilePay"
            type="button"
            class="w-full bg-green-500 text-white py-2 rounded mb-2 text-sm font-medium"
            data-i18n="cart_mobilepay_button"
          >
            Open MobilePay
          </button>

          <p
            class="text-xs text-gray-500 mb-2 text-center"
            data-i18n="cart_mobilepay_note"
          >
            On mobile this tries to open MobilePay. On desktop it might not do anything. That is fine.
          </p>

          <button
            id="copyMobilePay"
            type="button"
            class="w-full bg-gray-200 py-2 rounded text-xs font-medium"
            data-i18n="cart_copy_message"
          >
            Copy order message
          </button>
        </div>
      </div>
    </aside>

    <!-- Cart overlay -->
    <div
      id="cartOverlay"
      class="hidden-while-cart"
    ></div>

    <!-- How to order -->
    <section
      class="py-16 md:py-20 text-center fade-section"
    >
      <h2
        class="text-2xl md:text-3xl font-bold mb-8"
        data-i18n="how_title"
      >
        How to order
      </h2>

      <div
        class="grid grid-cols-1 md:grid-cols-5 gap-6 max-w-6xl mx-auto text-sm md:text-base"
      >
        <div
          class="bg-white/10 rounded-xl p-5 backdrop-blur"
        >
          <h3
            class="font-semibold text-base mb-2"
            data-i18n="how_step1_title"
          >
            1. Choose
          </h3>
          <p
            class="text-xs md:text-sm"
            data-i18n="how_step1_text"
          >
            Pick your SEP piece. T shirt, hoodie or trousers. Then choose your size and quantity.
          </p>
        </div>

        <div
          class="bg-white/10 rounded-xl p-5 backdrop-blur"
        >
          <h3
            class="font-semibold text-base mb-2"
            data-i18n="how_step2_title"
          >
            2. Add to cart
          </h3>
          <p
            class="text-xs md:text-sm"
            data-i18n="how_step2_text"
          >
            Use the Add button on each card. When you are ready, open your cart to review the order.
          </p>
        </div>

        <div
          class="bg-white/10 rounded-xl p-5 backdrop-blur"
        >
          <h3
            class="font-semibold text-base mb-2"
            data-i18n="how_step3_title"
          >
            3. Copy message
          </h3>
          <p
            class="text-xs md:text-sm"
            data-i18n="how_step3_text"
          >
            Tap Copy order message in the cart. It includes your items, shipping and total.
          </p>
        </div>

        <div
          class="bg-white/10 rounded-xl p-5 backdrop-blur"
        >
          <h3
            class="font-semibold text-base mb-2"
            data-i18n="how_step4_title"
          >
            4. Pay with MobilePay
          </h3>
          <p
            class="text-xs md:text-sm"
            data-i18n="how_step4_text"
          >
            Send the total to <b>5894BZ</b> with MobilePay. Remember to add shipping unless you live in Copenhagen.
          </p>
        </div>

        <div
          class="bg-white/10 rounded-xl p-5 backdrop-blur"
        >
          <h3
            class="font-semibold text-base mb-2"
            data-i18n="how_step5_title"
          >
            5. Send your order
          </h3>
          <p
            class="text-xs md:text-sm"
            data-i18n="how_step5_text"
          >
            Paste the message into a DM to <b>@seproairesis</b> on Instagram or TikTok. We confirm and ship.
          </p>
        </div>
      </div>
    </section>

    <!-- Footer -->
    <footer
      class="text-center py-10 fade-section text-xs md:text-sm px-6"
    >
      <p data-i18n="footer_main">
        © 2025 SEP - Se Proairesis (ancient Greek for “Your Choice”).
        MobilePay 5894BZ. +45 kr shipping across Denmark. Free in Copenhagen.
      </p>

      <p
        class="mt-2 text-[11px] text-gray-400 max-w-2xl mx-auto"
        data-i18n="footer_privacy"
      >
        No data selling. No ads following you around. No dark patterns. Just a small site that helps you get the
        clothing you want.
      </p>

      <div
        class="flex justify-center gap-4 mt-4"
      >
        <a
          href="https://instagram.com/seproairesis"
          target="_blank"
          rel="noreferrer"
          class="bg-gradient-to-br from-pink-500 to-purple-600 text-white px-4 py-2 rounded-full text-xs font-medium"
          data-i18n="footer_instagram"
        >
          Instagram @seproairesis
        </a>

        <a
          href="https://tiktok.com/@seproairesis"
          target="_blank"
          rel="noreferrer"
          class="bg-black text-white px-4 py-2 rounded-full text-xs font-medium"
          data-i18n="footer_tiktok"
        >
          TikTok @seproairesis
        </a>
      </div>
    </footer>
  </section>

  <!--
    PART 1 END
    Next parts will contain:
    - About SEP scene
    - All Make It Happen scenes (welcome, login, leaderboard, stats, profile, about)
    - Translation system, nav logic, cart logic, MIH logic (inside a single <script> tag)
  -->
  <!-- =========================================================
       ABOUT SEP SCENE
       ========================================================= -->
  <section
    id="scene-sep-about"
    class="scene"
  >
    <!-- Exit bar back to home -->
    <div class="scene-exit-bar">
      <div class="scene-exit-inner">
        <button
          type="button"
          class="scene-exit-button"
          onclick="showScene('home')"
          data-i18n="exit_to_home"
        >
          Back to home
        </button>
      </div>
    </div>

    <div
      class="min-h-screen flex items-center justify-center px-6 py-16"
    >
      <div
        class="max-w-3xl w-full bg-black/80 text-white rounded-3xl border border-white/15 px-6 md:px-10 py-10 md:py-14 fade-section"
      >
        <p
          class="text-[11px] tracking-[0.2em] uppercase text-gray-400 mb-4"
          data-i18n="sep_about_label"
        >
          About SEP
        </p>

        <h1
          class="text-3xl md:text-4xl font-semibold mb-5"
          data-i18n="sep_about_title"
        >
          Se Proairesis. Your choice.
        </h1>

        <p
          class="text-sm md:text-base text-gray-200 mb-4"
          data-i18n="sep_about_p1"
        >
          SEP takes its name from Se Proairesis. Ancient Greek for “your choice”. It is a reminder
          that what you put on in the morning is one of the first choices you make in a day.
        </p>

        <p
          class="text-sm md:text-base text-gray-200 mb-4"
          data-i18n="sep_about_p2"
        >
          The pieces are simple on purpose. A white T shirt. A black hoodie. Black trousers.
          Small batch, slow and intentional production in Copenhagen. No weekly drops. No noise.
        </p>

        <p
          class="text-sm md:text-base text-gray-200 mb-6"
          data-i18n="sep_about_p3"
        >
          SEP is for people who want fewer, better items. Clothes that feel soft, sit cleanly and
          quietly support whatever else you have going on in your life.
        </p>

        <div class="border-t border-white/10 pt-6 mt-4">
          <h2
            class="text-base md:text-lg font-semibold mb-2"
            data-i18n="sep_about_privacy_title"
          >
            A small brand that respects your privacy.
          </h2>

          <p
            class="text-xs md:text-sm text-gray-300 mb-4"
            data-i18n="sep_about_privacy_text"
          >
            SEP does not sell your data. There are no tracking pixels here. No cookies that follow
            you around the internet. Just a cart that lives in your browser and a MobilePay number.
          </p>

          <div
            class="flex flex-wrap gap-3"
          >
            <button
              type="button"
              onclick="showScene('sep-shop')"
              class="px-5 py-2 rounded-full bg-white text-black text-xs md:text-sm font-medium"
              data-i18n="sep_about_back_to_shop"
            >
              Back to SEP shop
            </button>

            <button
              type="button"
              onclick="showScene('mih-welcome')"
              class="px-5 py-2 rounded-full border border-white/40 text-xs md:text-sm text-gray-100"
              data-i18n="sep_about_go_to_mih"
            >
              Go to Make It Happen
            </button>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- =========================================================
       MIH WELCOME SCENE
       ========================================================= -->
  <section
    id="scene-mih-welcome"
    class="scene"
  >
    <!-- Exit bar back to home -->
    <div class="scene-exit-bar">
      <div class="scene-exit-inner">
        <button
          type="button"
          class="scene-exit-button"
          onclick="showScene('home')"
          data-i18n="exit_to_home"
        >
          Back to home
        </button>
      </div>
    </div>

    <div
      class="min-h-screen flex items-center justify-center px-4 py-16"
    >
      <div
        class="max-w-5xl w-full grid md:grid-cols-2 gap-10 text-white fade-section"
      >
        <!-- Left column: hero -->
        <div
          class="mih-card p-6 md:p-8 flex flex-col justify-between"
        >
          <div>
            <p
              class="text-[11px] tracking-[0.2em] uppercase text-sky-300 mb-3"
              data-i18n="mih_welcome_label"
            >
              Make It Happen
            </p>

            <h1
              class="text-3xl md:text-4xl font-semibold mb-4"
              data-i18n="mih_welcome_title"
            >
              Move more. Compete gently. Make it happen.
            </h1>

            <p
              class="text-sm md:text-base text-slate-200 mb-4"
              data-i18n="mih_welcome_intro"
            >
              Run, walk or cycle. Log distance and time. Watch your stats grow, climb your league
              and nudge friends without any pressure to be perfect.
            </p>

            <p
              class="text-xs md:text-sm text-slate-300 mb-6"
              data-i18n="mih_welcome_explainer"
            >
              Make It Happen is a simple health challenge that lives in your browser. No paid app.
              No subscription. Just a small shared scoreboard that encourages movement.
            </p>
          </div>

          <div class="flex flex-wrap gap-3 mt-2">
            <button
              type="button"
              onclick="showScene('mih-login')"
              class="px-5 py-2 rounded-full bg-white text-black text-xs md:text-sm font-medium"
              data-i18n="mih_welcome_cta_login"
            >
              Log in or create account
            </button>

            <button
              type="button"
              onclick="showScene('mih-leaderboard')"
              class="px-5 py-2 rounded-full border border-sky-400 text-xs md:text-sm text-sky-100"
              data-i18n="mih_welcome_cta_leaderboard"
            >
              See leaderboard
            </button>

            <button
              type="button"
              onclick="showScene('mih-about')"
              class="px-5 py-2 rounded-full border border-slate-500 text-[11px] text-slate-200"
              data-i18n="mih_welcome_cta_about"
            >
              What is this?
            </button>
          </div>
        </div>

        <!-- Right column: leagues + privacy -->
        <div class="flex flex-col gap-5">
          <!-- Leagues card -->
          <div
            class="mih-card p-6 md:p-7"
          >
            <h2
              class="text-base md:text-lg font-semibold mb-3"
              data-i18n="mih_welcome_leagues_title"
            >
              Four simple leagues.
            </h2>

            <p
              class="text-xs md:text-sm text-slate-200 mb-4"
              data-i18n="mih_welcome_leagues_text"
            >
              New accounts are placed where numbers are lightest. That way no league feels empty
              and nobody gets dropped into a crowded table at the bottom.
            </p>

            <div class="grid grid-cols-2 gap-3 text-xs">
              <div
                class="rounded-2xl border border-slate-600/70 bg-slate-900/80 px-4 py-3"
              >
                <p class="font-semibold mb-1">
                  Amateurs
                </p>
                <p class="text-slate-300">
                  Getting moving again. Short walks, light runs and first steps count.
                </p>
              </div>

              <div
                class="rounded-2xl border border-slate-600/70 bg-slate-900/80 px-4 py-3"
              >
                <p class="font-semibold mb-1">
                  Intermediates
                </p>
                <p class="text-slate-300">
                  A bit more consistency. A few sessions a week and building confidence.
                </p>
              </div>

              <div
                class="rounded-2xl border border-slate-600/70 bg-slate-900/80 px-4 py-3"
              >
                <p class="font-semibold mb-1">
                  Pros
                </p>
                <p class="text-slate-300">
                  Training regularly. Comfortable with races or longer distances.
                </p>
              </div>

              <div
                class="rounded-2xl border border-yellow-400/70 bg-slate-900/80 px-4 py-3"
              >
                <p class="font-semibold mb-1">
                  Legends
                </p>
                <p class="text-slate-300">
                  The “how are they doing that?” people. Serious distances, still friendly.
                </p>
              </div>
            </div>

            <p
              class="mt-4 text-[11px] text-slate-400"
              data-i18n="mih_welcome_leagues_note"
            >
              Ranking looks at distance, commitment over weeks and improvement, not just raw speed.
            </p>
          </div>

          <!-- Privacy card -->
          <div
            class="mih-card p-6 md:p-7"
          >
            <h2
              class="text-base md:text-lg font-semibold mb-2"
              data-i18n="mih_welcome_privacy_title"
            >
              Your data stays in your browser.
            </h2>

            <p
              class="text-xs md:text-sm text-slate-200 mb-3"
              data-i18n="mih_welcome_privacy_text1"
            >
              All Make It Happen data is stored with localStorage in your own browser. There is no
              central server and no analytics dashboard watching you.
            </p>

            <p
              class="text-xs md:text-sm text-slate-200 mb-3"
              data-i18n="mih_welcome_privacy_text2"
            >
              If an account has been logged out for more than 30 days, its data can be cleared from
              that browser so things stay light.
            </p>

            <p
              class="text-[11px] text-slate-400"
              data-i18n="mih_welcome_privacy_text3"
            >
              No data selling. No trackers. No ads. Just a small scoreboard built for real people
              with busy lives.
            </p>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- =========================================================
       MIH LOGIN SCENE
       ========================================================= -->
  <section
    id="scene-mih-login"
    class="scene"
  >
    <!-- Exit bar back to home -->
    <div class="scene-exit-bar">
      <div class="scene-exit-inner">
        <button
          type="button"
          class="scene-exit-button"
          onclick="showScene('home')"
          data-i18n="exit_to_home"
        >
          Back to home
        </button>
      </div>
    </div>

    <div
      class="min-h-screen flex items-center justify-center px-4 py-16"
    >
      <div
        class="max-w-4xl w-full grid md:grid-cols-2 gap-8 fade-section"
      >
        <!-- Login / create form -->
        <div
          class="mih-card p-6 md:p-8"
        >
          <h1
            class="text-2xl md:text-3xl font-semibold mb-3"
            data-i18n="mih_login_title"
          >
            Log in or create your place.
          </h1>

          <p
            class="text-xs md:text-sm text-slate-200 mb-5"
            data-i18n="mih_login_intro"
          >
            Use your name and a simple password. If you are new, we create an account and place you
            in the league that currently has the fewest people.
          </p>

          <form
            id="mihLoginForm"
            class="space-y-4 text-sm"
          >
            <div>
              <label
                for="mihNameInput"
                class="block mb-1 text-slate-200"
                data-i18n="mih_login_name_label"
              >
                Name
              </label>
              <input
                id="mihNameInput"
                type="text"
                required
                class="w-full rounded-lg bg-slate-900 border border-slate-600 px-3 py-2 text-sm text-white"
                placeholder="Type your name"
              />
            </div>

            <div>
              <label
                for="mihPasswordInput"
                class="block mb-1 text-slate-200"
                data-i18n="mih_login_password_label"
              >
                Password
              </label>
              <input
                id="mihPasswordInput"
                type="password"
                required
                class="w-full rounded-lg bg-slate-900 border border-slate-600 px-3 py-2 text-sm text-white"
                placeholder="Choose a simple password"
              />
            </div>

            <p
              class="text-[11px] text-slate-400"
              data-i18n="mih_login_hint"
            >
              If we find a matching name, we check your password. If there is no match, we create
              a new account for you.
            </p>

            <button
              type="submit"
              class="w-full mt-1 bg-white text-black py-2 rounded-full text-xs md:text-sm font-medium"
              data-i18n="mih_login_submit"
            >
              Enter Make It Happen
            </button>
          </form>

          <div
            class="mt-6 border-t border-slate-700 pt-4 text-[11px] text-slate-400"
          >
            <p data-i18n="mih_login_cleanup">
              Accounts that stay logged out for more than 30 days can be deleted from this
              browser together with their activities so the data does not sit forever.
            </p>
          </div>
        </div>

        <!-- Current user + quick links -->
        <div
          class="mih-card p-6 md:p-8 flex flex-col justify-between"
        >
          <div>
            <h2
              class="text-base md:text-lg font-semibold mb-3"
              data-i18n="mih_login_status_title"
            >
              Your current session.
            </h2>

            <div
              id="mihCurrentUserPanel"
              class="rounded-2xl border border-slate-600 bg-slate-900/70 px-4 py-3 mb-4 text-xs md:text-sm text-slate-200"
            >
              <!-- JS fills current user name + league or says "Not logged in" -->
            </div>

            <div class="flex flex-wrap gap-3 mb-4 text-xs">
              <button
                type="button"
                id="mihGoToLeaderboardBtn"
                class="px-4 py-2 rounded-full border border-sky-400 text-sky-100"
              >
                Go to leaderboard
              </button>

              <button
                type="button"
                id="mihGoToMyActivitiesBtn"
                class="px-4 py-2 rounded-full border border-slate-500 text-slate-200"
              >
                See my activities
              </button>
            </div>
          </div>

          <div class="border-t border-slate-700 pt-4 mt-3">
            <h3
              class="text-xs md:text-sm font-semibold mb-2"
              data-i18n="mih_login_logout_title"
            >
              Log out or clear data.
            </h3>

            <p
              class="text-[11px] text-slate-400 mb-3"
              data-i18n="mih_login_logout_text"
            >
              You can log out at any time. You can also clear your account and activities from this
              browser completely if you want to start over.
            </p>

            <div class="flex flex-wrap gap-3 text-[11px]">
              <button
                type="button"
                id="mihLogoutBtn"
                class="px-4 py-2 rounded-full border border-slate-500 text-slate-200"
                data-i18n="mih_login_logout_button"
              >
                Log out
              </button>

              <button
                type="button"
                id="mihDeleteAccountBtn"
                class="px-4 py-2 rounded-full border border-red-500 text-red-300"
                data-i18n="mih_login_delete_button"
              >
                Delete account from this browser
              </button>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!--
    PART 2 END
    Next we will add:
    - MIH Leaderboard scene
    - MIH Stats scene
    - MIH Profile scene
    - MIH About scene
    (then finally the <script> block with translations, nav, cart + MIH logic)
  -->
  <!-- =========================================================
       MIH LEADERBOARD SCENE
       ========================================================= -->
  <section
    id="scene-mih-leaderboard"
    class="scene"
  >
    <!-- Exit bar back to home -->
    <div class="scene-exit-bar">
      <div class="scene-exit-inner">
        <button
          type="button"
          class="scene-exit-button"
          onclick="showScene('home')"
          data-i18n="exit_to_home"
        >
          Back to home
        </button>
      </div>
    </div>

    <div
      class="min-h-screen flex items-center justify-center px-4 py-16"
    >
      <div
        class="max-w-6xl w-full space-y-8"
      >
        <!-- Header row: title + user status -->
        <div
          class="flex flex-col md:flex-row md:items-center md:justify-between gap-4"
        >
          <div>
            <p
              class="text-[11px] tracking-[0.25em] uppercase text-slate-400"
            >
              Make It Happen
            </p>
            <h1
              class="text-2xl md:text-3xl font-semibold text-white mt-1"
            >
              Live leaderboard.
            </h1>
            <p
              class="text-xs md:text-sm text-slate-300 mt-2 max-w-xl"
            >
              Distance, commitment and improvement all count. This table updates whenever someone
              adds an activity on this browser.
            </p>
          </div>

          <div
            id="mihUserHeaderControls"
            class="flex flex-col items-start md:items-end gap-2 text-xs"
          >
            <!-- JS fills current user chip and quick actions -->
          </div>
        </div>

        <!-- Main grid: form + leaderboard -->
        <div
          class="grid md:grid-cols-2 gap-8"
        >
          <!-- Activity form + explainer -->
          <div
            class="mih-card p-6 md:p-8 text-white"
          >
            <h2
              class="text-lg md:text-xl font-semibold mb-2"
            >
              Add your latest activity.
            </h2>

            <p
              class="text-xs md:text-sm text-slate-200 mb-4"
            >
              Log any run, walk or ride. Use kilometres and minutes so the leaderboard stays fair
              for everyone.
            </p>

            <form
              id="mihEntryForm"
              class="space-y-4 text-xs md:text-sm"
            >
              <div>
                <label
                  for="mihEntryName"
                  class="block mb-1 text-slate-200"
                >
                  Name
                </label>
                <input
                  id="mihEntryName"
                  type="text"
                  disabled
                  placeholder="Log in on the Login screen to set your name."
                  class="w-full rounded-full bg-slate-900 border border-slate-600 px-3 py-2 text-xs md:text-sm text-slate-200"
                />
                <p
                  class="mt-1 text-[11px] text-slate-400"
                >
                  Your name comes from your account. You cannot change it here.
                </p>
              </div>

              <div
                class="grid grid-cols-1 sm:grid-cols-2 gap-3"
              >
                <div>
                  <label
                    for="mihEntryDistance"
                    class="block mb-1 text-slate-200"
                  >
                    Distance (km)
                  </label>
                  <input
                    id="mihEntryDistance"
                    type="number"
                    step="0.1"
                    min="0"
                    class="w-full rounded-full bg-slate-900 border border-slate-600 px-3 py-2 text-xs md:text-sm text-slate-200"
                    placeholder="e.g. 5.0"
                    required
                  />
                </div>

                <div>
                  <label
                    for="mihEntryTime"
                    class="block mb-1 text-slate-200"
                  >
                    Time (minutes)
                  </label>
                  <input
                    id="mihEntryTime"
                    type="number"
                    step="0.1"
                    min="0"
                    class="w-full rounded-full bg-slate-900 border border-slate-600 px-3 py-2 text-xs md:text-sm text-slate-200"
                    placeholder="e.g. 28.0"
                    required
                  />
                </div>
              </div>

              <button
                type="submit"
                class="mt-1 w-full bg-white text-black py-2 rounded-full text-xs md:text-sm font-medium"
              >
                Save my activity
              </button>

              <p
                class="mt-2 text-[11px] text-slate-400"
              >
                Leagues have unlimited spaces. New accounts are spread so each league stays balanced.
              </p>
            </form>

            <div class="border-t border-slate-700 mt-6 pt-4 text-xs">
              <h3
                class="text-sm font-semibold mb-2"
              >
                How ranking works.
              </h3>

              <ul class="list-disc list-inside space-y-1 text-slate-200">
                <li>
                  <span class="font-semibold">Total distance</span> - the more you move, the higher you sit.
                </li>
                <li>
                  <span class="font-semibold">Commitment over time</span> - more sessions and more weeks logged matter.
                </li>
                <li>
                  <span class="font-semibold">Speed and improvement</span> - faster pace helps but it is not everything.
                </li>
              </ul>

              <p
                class="mt-3 text-[11px] text-slate-400"
              >
                This balance means older runners, heavier runners and busy people can still climb
                by turning up regularly.
              </p>
            </div>
          </div>

          <!-- Leaderboard card -->
          <div
            class="mih-card p-6 md:p-8 text-white"
          >
            <div
              class="flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3 mb-3"
            >
              <div>
                <h2
                  class="text-lg md:text-xl font-semibold"
                >
                  Table by league.
                </h2>
                <p
                  class="text-[11px] md:text-xs text-slate-300 mt-1"
                >
                  Filter by league or view everyone together.
                </p>
              </div>

              <div
                class="flex items-center gap-2 text-xs"
              >
                <span class="text-slate-300">
                  League
                </span>
                <select
                  id="mihLeagueFilter"
                  class="px-3 py-1 rounded-full bg-slate-900 border border-slate-600 text-xs text-slate-100"
                >
                  <option value="all">All leagues</option>
                  <option value="amateurs">Amateurs</option>
                  <option value="intermediates">Intermediates</option>
                  <option value="pros">Pros</option>
                  <option value="legends">Legends</option>
                </select>
              </div>
            </div>

            <div
              class="overflow-x-auto text-xs md:text-sm"
            >
              <table
                class="w-full border-collapse min-w-full"
              >
                <thead
                  class="text-[11px] uppercase tracking-wide text-slate-400 border-b border-slate-700"
                >
                  <tr>
                    <th class="py-2 pr-2 text-left">
                      #
                    </th>
                    <th class="py-2 px-2 text-left">
                      Participant
                    </th>
                    <th class="py-2 px-2 text-left">
                      League
                    </th>
                    <th class="py-2 px-2 text-left">
                      Total distance
                    </th>
                    <th class="py-2 px-2 text-left">
                      Total time
                    </th>
                    <th class="py-2 px-2 text-left hidden lg:table-cell">
                      Average distance
                    </th>
                    <th class="py-2 px-2 text-left hidden lg:table-cell">
                      Best distance
                    </th>
                    <th class="py-2 px-2 text-left hidden lg:table-cell">
                      Improvement
                    </th>
                  </tr>
                </thead>
                <tbody
                  id="mihLeaderboardBody"
                  class="text-slate-100"
                >
                  <!-- JS renders leaderboard rows -->
                </tbody>
              </table>
            </div>

            <div
              id="mihLeaderboardEmpty"
              class="text-[11px] text-slate-400 mt-3"
            >
              No activities yet. Be the first to log a run and sit at the top.
            </div>
          </div>
        </div>

        <!-- Healthy / Free / Fun + My activities -->
        <div
          class="grid lg:grid-cols-2 gap-8"
        >
          <!-- Healthy / Free / Fun -->
          <div
            class="mih-card p-6 md:p-8 text-white"
          >
            <h2
              class="text-lg md:text-xl font-semibold mb-4"
            >
              Healthy. Free. Fun.
            </h2>

            <div class="space-y-4 text-xs md:text-sm">
              <div>
                <h3
                  class="font-semibold mb-1"
                >
                  Healthy
                </h3>
                <p class="text-slate-200">
                  Even short walks and slow runs help your heart, your sleep and your mood. Make It
                  Happen is about those small pieces adding up over time.
                </p>
              </div>

              <div>
                <h3
                  class="font-semibold mb-1"
                >
                  Free
                </h3>
                <p class="text-slate-200">
                  There is no paid tier and no premium unlock. The only thing that changes your
                  place on this site is how often and how far you move.
                </p>
              </div>

              <div>
                <h3
                  class="font-semibold mb-1"
                >
                  Fun
                </h3>
                <p class="text-slate-200">
                  Friendly leagues, gentle competition and visible progress. Enough structure to
                  keep you going. Not enough pressure to make you stop.
                </p>
              </div>
            </div>

            <div
              class="border-t border-slate-700 mt-5 pt-4 text-[11px] text-slate-400"
            >
              <p>
                All data stays in this browser. There are no tracking pixels. No ad network.
                No profile being built somewhere else.
              </p>
            </div>
          </div>

          <!-- My activities -->
          <div
            class="mih-card p-6 md:p-8 text-white"
          >
            <div
              class="flex items-center justify-between gap-2 mb-3"
            >
              <h2
                class="text-lg md:text-xl font-semibold"
              >
                My activities.
              </h2>

              <span
                id="mihMyActivityCount"
                class="text-[11px] text-slate-300"
              >
                <!-- JS fills count -->
              </span>
            </div>

            <p
              class="text-[11px] md:text-xs text-slate-300 mb-3"
            >
              This table only shows activities for the account that is currently logged in on this
              browser.
            </p>

            <div
              class="overflow-x-auto text-xs md:text-sm"
            >
              <table
                class="w-full border-collapse min-w-full"
              >
                <thead
                  class="text-[11px] uppercase tracking-wide text-slate-400 border-b border-slate-700"
                >
                  <tr>
                    <th class="py-2 px-2 text-left">
                      Date
                    </th>
                    <th class="py-2 px-2 text-left">
                      Distance
                    </th>
                    <th class="py-2 px-2 text-left">
                      Time
                    </th>
                    <th class="py-2 px-2 text-right">
                    </th>
                  </tr>
                </thead>
                <tbody
                  id="mihMyActivitiesBody"
                  class="text-slate-100"
                >
                  <!-- JS renders rows -->
                </tbody>
              </table>
            </div>

            <div
              id="mihMyActivitiesEmpty"
              class="text-[11px] text-slate-400 mt-3"
            >
              Log in and add an activity to see it here.
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- =========================================================
       MIH STATS SCENE
       ========================================================= -->
  <section
    id="scene-mih-stats"
    class="scene"
  >
    <!-- Exit bar back to home -->
    <div class="scene-exit-bar">
      <div class="scene-exit-inner">
        <button
          type="button"
          class="scene-exit-button"
          onclick="showScene('home')"
          data-i18n="exit_to_home"
        >
          Back to home
        </button>
      </div>
    </div>

    <div
      class="min-h-screen flex items-center justify-center px-4 py-16"
    >
      <div
        class="max-w-6xl w-full space-y-6"
      >
        <div
          class="flex flex-col md:flex-row md:items-center md:justify-between gap-4"
        >
          <div>
            <p
              class="text-[11px] tracking-[0.25em] uppercase text-slate-400"
            >
              Make It Happen
            </p>
            <h1
              class="text-2xl md:text-3xl font-semibold text-white mt-1"
            >
              Player statistics.
            </h1>
            <p
              class="text-xs md:text-sm text-slate-300 mt-2 max-w-xl"
            >
              Every activity builds a simple profile. Stats focus on distance, total time,
              number of sessions and how your average changes.
            </p>
          </div>

          <div
            class="text-[11px] text-slate-300"
          >
            <p>
              These numbers only use data held locally in this browser.
            </p>
          </div>
        </div>

        <div
          class="mih-card p-6 md:p-8 text-white"
        >
          <div
            class="overflow-x-auto text-xs md:text-sm"
          >
            <table
              class="w-full border-collapse min-w-full"
            >
              <thead
                class="text-[11px] uppercase tracking-wide text-slate-400 border-b border-slate-700"
              >
                <tr>
                  <th class="py-2 px-2 text-left">
                    Participant
                  </th>
                  <th class="py-2 px-2 text-left">
                    League
                  </th>
                  <th class="py-2 px-2 text-left">
                    Runs
                  </th>
                  <th class="py-2 px-2 text-left">
                    Total distance
                  </th>
                  <th class="py-2 px-2 text-left">
                    Total time
                  </th>
                  <th class="py-2 px-2 text-left">
                    Avg distance
                  </th>
                  <th class="py-2 px-2 text-left">
                    Best distance
                  </th>
                  <th class="py-2 px-2 text-left">
                    Improvement
                  </th>
                </tr>
              </thead>
              <tbody
                id="mihStatsBody"
                class="text-slate-100"
              >
                <!-- JS renders player stats -->
              </tbody>
            </table>
          </div>

          <div
            id="mihStatsEmpty"
            class="text-[11px] text-slate-400 mt-3"
          >
            Stats will appear when people start logging activities on this browser.
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- =========================================================
       MIH PROFILE SCENE
       ========================================================= -->
  <section
    id="scene-mih-profile"
    class="scene"
  >
    <!-- Exit bar back to home -->
    <div class="scene-exit-bar">
      <div class="scene-exit-inner">
        <button
          type="button"
          class="scene-exit-button"
          onclick="showScene('home')"
          data-i18n="exit_to_home"
        >
          Back to home
        </button>
      </div>
    </div>

    <div
      class="min-h-screen flex items-center justify-center px-4 py-16"
    >
      <div
        class="max-w-4xl w-full mih-card p-6 md:p-8 text-white"
      >
        <div
          class="flex flex-col md:flex-row md:items-center md:justify-between gap-4 mb-6"
        >
          <div>
            <p
              class="text-[11px] tracking-[0.25em] uppercase text-slate-400"
            >
              Runner profile
            </p>
            <h1
              id="mihProfileName"
              class="text-2xl md:text-3xl font-semibold mt-1"
            >
              <!-- JS fills name -->
            </h1>
            <p
              id="mihProfileLeague"
              class="text-xs md:text-sm text-slate-300 mt-1"
            >
              <!-- JS fills league -->
            </p>
          </div>

          <div class="flex flex-wrap gap-3 text-xs">
            <button
              type="button"
              class="px-4 py-2 rounded-full border border-slate-500 text-slate-100"
              onclick="showScene('mih-leaderboard')"
            >
              Back to leaderboard
            </button>
          </div>
        </div>

        <!-- Summary grid -->
        <div
          class="grid sm:grid-cols-2 gap-5 text-xs md:text-sm mb-6"
        >
          <div>
            <p class="text-slate-400">
              Total distance
            </p>
            <p
              id="mihProfileTotalDistance"
              class="text-lg font-semibold text-white mt-1"
            >
              <!-- JS -->
            </p>
          </div>

          <div>
            <p class="text-slate-400">
              Total time
            </p>
            <p
              id="mihProfileTotalTime"
              class="text-lg font-semibold text-white mt-1"
            >
              <!-- JS -->
            </p>
          </div>

          <div>
            <p class="text-slate-400">
              Runs logged
            </p>
            <p
              id="mihProfileRuns"
              class="text-lg font-semibold text-white mt-1"
            >
              <!-- JS -->
            </p>
          </div>

          <div>
            <p class="text-slate-400">
              Average distance
            </p>
            <p
              id="mihProfileAvgDistance"
              class="text-lg font-semibold text-white mt-1"
            >
              <!-- JS -->
            </p>
          </div>
        </div>

        <div
          class="border-t border-slate-700 pt-5"
        >
          <h2
            class="text-base md:text-lg font-semibold mb-2"
          >
            Estimated best times.
          </h2>
          <p
            class="text-[11px] md:text-xs text-slate-300 mb-4"
          >
            These estimates use the average pace from the runs logged for this runner.
          </p>

          <div
            class="grid grid-cols-3 gap-4 text-xs md:text-sm"
          >
            <div>
              <p class="text-slate-400">
                5 km
              </p>
              <p
                id="mihProfileBest5k"
                class="text-lg font-semibold text-white mt-1"
              >
                <!-- JS -->
              </p>
            </div>

            <div>
              <p class="text-slate-400">
                10 km
              </p>
              <p
                id="mihProfileBest10k"
                class="text-lg font-semibold text-white mt-1"
              >
                <!-- JS -->
              </p>
            </div>

            <div>
              <p class="text-slate-400">
                100 m
              </p>
              <p
                id="mihProfileBest100m"
                class="text-lg font-semibold text-white mt-1"
              >
                <!-- JS -->
              </p>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- =========================================================
       MIH ABOUT SCENE
       ========================================================= -->
  <section
    id="scene-mih-about"
    class="scene"
  >
    <!-- Exit bar back to home -->
    <div class="scene-exit-bar">
      <div class="scene-exit-inner">
        <button
          type="button"
          class="scene-exit-button"
          onclick="showScene('home')"
          data-i18n="exit_to_home"
        >
          Back to home
        </button>
      </div>
    </div>

    <div
      class="min-h-screen flex items-center justify-center px-4 py-16"
    >
      <div
        class="max-w-5xl w-full mih-card p-6 md:p-10 text-white"
      >
        <div class="mb-6">
          <p
            class="text-[11px] tracking-[0.25em] uppercase text-slate-400"
          >
            Make It Happen
          </p>
          <h1
            class="text-2xl md:text-3xl font-semibold mt-1"
          >
            About the challenge.
          </h1>
        </div>

        <div
          class="space-y-4 text-xs md:text-sm text-slate-100"
        >
          <p>
            Make It Happen started as a simple idea. Give people a place to log movement where the
            main goal is showing up, not showing off.
          </p>

          <p>
            You move how you like. Run around a pitch. Walk with a friend. Cycle to school or
            work. Log the distance and time. The site turns that into a small, honest scoreboard.
          </p>

          <p class="font-semibold">
            It is built to be:
          </p>

          <ul class="list-disc list-inside space-y-1">
            <li>
              <span class="font-semibold">Healthy</span> - even slow, short sessions count and
              you can see how they add up.
            </li>
            <li>
              <span class="font-semibold">Free</span> - there is no subscription, no premium tier
              and no upsell.
            </li>
            <li>
              <span class="font-semibold">Fun</span> - friendly competition and clear progress
              without shame or perfectionism.
            </li>
          </ul>

          <p>
            The four leagues keep things roughly grouped by experience. New accounts are placed in
            the league with the fewest people so tables stay alive and visible.
          </p>

          <div class="border-t border-slate-700 pt-4 mt-4">
            <h2
              class="text-sm md:text-base font-semibold mb-2"
            >
              Data, privacy and how it actually works.
            </h2>

            <p>
              All data lives in this browser using localStorage. There is no hidden server
              recording what you do and no analytics tool watching when you visit.
            </p>

            <p>
              If you delete your account from this browser, your entries go with it. If an account
              stays logged out for more than 30 days, the browser can safely clear it so things do
              not pile up.
            </p>

            <p class="text-[11px] text-slate-300 mt-2">
              That means:
              no data selling. No hidden tracking. No dark patterns. Just a small project that
              helps you notice and respect the movement you do.
            </p>
          </div>
        </div>

        <div
          class="flex flex-wrap gap-3 mt-6 text-xs md:text-sm"
        >
          <button
            type="button"
            onclick="showScene('mih-leaderboard')"
            class="px-5 py-2 rounded-full bg-white text-black font-medium"
          >
            Go to leaderboard
          </button>

          <button
            type="button"
            onclick="showScene('sep-shop')"
            class="px-5 py-2 rounded-full border border-slate-500 text-slate-100"
          >
            Back to SEP
          </button>
        </div>
      </div>
    </div>
  </section>

  <!--
    PART 3 END
    Next (Part 4) will contain:
    - Full <script> block
    - Translation system
    - Nav + scene switching logic
    - SEP cart + MobilePay logic
    - MIH data model, rendering and auth
    - initAll() setup
    - </body></html> closing tags
  -->
  <!-- =========================================================
       PART 4 - FULL JAVASCRIPT LOGIC + CLOSING TAGS
       ========================================================= -->
  <script>
    // =========================================================
    // TRANSLATION SYSTEM - SEP ONLY
    // =========================================================

    // Translation tables for SEP static text.
    // MIH remains English only on purpose.
    const translations = {
      en: {
        // General / nav
        nav_sep_shop: "SEP shop",
        nav_sep_about: "About SEP",
        nav_mih: "Make It Happen",
        nav_mih_about: "About Make It Happen",
        nav_language: "Language",

        // Exit to home
        exit_to_home: "Back to home",

        // Home scene
        home_title_main: "SEP and Make It Happen.",
        home_title_sub: "One calm place for clothes and movement.",
        home_intro_block_1_title: "SEP - Se Proairesis.",
        home_intro_block_1_body:
          "Minimal, Nordic clothing made in Copenhagen. A small shop with a white T-shirt, a black hoodie and black trousers. All hand pressed in small batches.",
        home_intro_block_2_title: "Make It Happen.",
        home_intro_block_2_body:
          "A simple movement challenge. Run, walk or cycle. Log your distance. See how far you and your friends can go over time.",
        home_button_go_sep: "Go to SEP shop",
        home_button_go_mih: "Go to Make It Happen",

        // SEP hero
        sep_hero_title: "Minimalist clothing made with intention.",
        sep_hero_subtitle: "Soft, clean and hand pressed in Copenhagen.",
        sep_hero_shop_button: "Shop now",
        sep_hero_cart_button: "View cart",

        // SEP products section
        sep_products_title: "Three products. One calm wardrobe.",
        sep_products_subtitle: "Soft, durable and simple pieces you can wear every day.",
        sep_product_tshirt_name: "SEP white T shirt",
        sep_product_hoodie_name: "SEP black hoodie",
        sep_product_trousers_name: "SEP black trousers",
        sep_product_price_label: "180 kr.",

        // Cart
        cart_title: "Your cart",
        cart_shipping_label: "Shipping destination",
        cart_shipping_cph: "Copenhagen",
        cart_shipping_rest: "Rest of Denmark",
        cart_shipping_note:
          "Copenhagen is free shipping. Rest of Denmark is +45 kr.",
        cart_empty: "Your cart is empty.",
        cart_subtotal_label: "Subtotal",
        cart_shipping_cost_label: "Shipping",
        cart_total_label: "Total",
        cart_shipping_free_cph: "0 kr. (FREE in Copenhagen)",
        cart_shipping_paid_other: "+45 kr.",
        cart_open_mobilepay: "Open MobilePay",
        cart_copy_message: "Copy order message",
        cart_mobilepay_hint:
          "“Open MobilePay” works best on mobile devices.",
        cart_mobilepay_alert: "Thank you for supporting SEP.",
        cart_item_remove: "Remove",
        cart_added_popup: "Added to cart.",
        cart_copied_popup: "Order message copied.",
        cart_order_message_greeting: "Hi SEP. Here is my order:",

        // How to order
        sep_how_title: "How to order.",
        sep_how_step_1_title: "1. Choose.",
        sep_how_step_1_body:
          "Pick your SEP piece. Choose size and quantity so it fits how you like to wear it.",
        sep_how_step_2_title: "2. Add to cart.",
        sep_how_step_2_body:
          "Press “Add” on each product you want. Then open the cart to review your choices.",
        sep_how_step_3_title: "3. Copy order.",
        sep_how_step_3_body:
          "Use the “Copy order message” button in the cart. It copies everything, including sizes and totals.",
        sep_how_step_4_title: "4. Pay with MobilePay.",
        sep_how_step_4_body:
          "Send the total amount to MobilePay <b>5894BZ</b>. Include your name so we know who it is from.",
        sep_how_step_5_title: "5. Send a DM.",
        sep_how_step_5_body:
          "Paste the copied message into a DM to <b>@seproairesis</b> on Instagram or TikTok. We only deliver in Denmark for now.",

        // Footer
        sep_footer_main:
          "© SEP - Se Proairesis (Your Choice). Hand pressed in Copenhagen. MobilePay 5894BZ.",
        sep_footer_shipping:
          "+45 kr shipping across Denmark. Free shipping inside Copenhagen.",
        sep_footer_privacy:
          "No data selling. No ads following you. No creepy tracking. Just a simple shop.",
        sep_footer_ig_label: "Open Instagram",
        sep_footer_tt_label: "Open TikTok",

        // About SEP scene
        sep_about_title: "About SEP.",
        sep_about_p1:
          "SEP stands for Se Proairesis. An old Greek idea that roughly means “Your Choice”. The brand exists to make that choice calm and simple.",
        sep_about_p2:
          "Instead of constant drops and heavy logos, SEP focuses on a few clean pieces. A white T shirt. A black hoodie. Black trousers. All soft and made in small batches in Copenhagen.",
        sep_about_p3:
          "You pick the size, choose how many you want and send a short order message. There is no infinite catalogue and no pressure to keep up.",
        sep_about_privacy:
          "Behind the scenes it is quiet as well. No data selling. No tracking across the internet. No tricks to keep you here longer than needed.",
        sep_about_button_back_shop: "Back to SEP shop",
        sep_about_button_go_mih: "Go to Make It Happen"
      },
      da: {
        nav_sep_shop: "SEP butik",
        nav_sep_about: "Om SEP",
        nav_mih: "Make It Happen",
        nav_mih_about: "Om Make It Happen",
        nav_language: "Sprog",

        exit_to_home: "Tilbage til forsiden",

        home_title_main: "SEP og Make It Happen.",
        home_title_sub: "Ét roligt sted til tøj og bevægelse.",
        home_intro_block_1_title: "SEP - Se Proairesis.",
        home_intro_block_1_body:
          "Minimalistisk, nordisk tøj lavet i København. En lille butik med en hvid T shirt, en sort hoodie og sorte bukser. Alt er håndtrykt i små serier.",
        home_intro_block_2_title: "Make It Happen.",
        home_intro_block_2_body:
          "En enkel bevægelsesudfordring. Løb, gå eller cykl. Registrér din distance. Se hvor langt du og dine venner kan komme over tid.",
        home_button_go_sep: "Gå til SEP butik",
        home_button_go_mih: "Gå til Make It Happen",

        sep_hero_title: "Minimalistisk tøj lavet med omtanke.",
        sep_hero_subtitle: "Blødt, rent og håndtrykt i København.",
        sep_hero_shop_button: "Shop nu",
        sep_hero_cart_button: "Se kurv",

        sep_products_title: "Tre produkter. Én rolig garderobe.",
        sep_products_subtitle:
          "Bløde, holdbare og simple styles du kan bruge hver dag.",
        sep_product_tshirt_name: "SEP hvid T shirt",
        sep_product_hoodie_name: "SEP sort hoodie",
        sep_product_trousers_name: "SEP sorte bukser",
        sep_product_price_label: "180 kr.",

        cart_title: "Din kurv",
        cart_shipping_label: "Levering",
        cart_shipping_cph: "København",
        cart_shipping_rest: "Resten af Danmark",
        cart_shipping_note:
          "København er gratis levering. Resten af Danmark er +45 kr.",
        cart_empty: "Din kurv er tom.",
        cart_subtotal_label: "Subtotal",
        cart_shipping_cost_label: "Fragt",
        cart_total_label: "I alt",
        cart_shipping_free_cph: "0 kr. (GRATIS i København)",
        cart_shipping_paid_other: "+45 kr.",
        cart_open_mobilepay: "Åbn MobilePay",
        cart_copy_message: "Kopiér ordrebesked",
        cart_mobilepay_hint:
          "“Åbn MobilePay” virker bedst på mobil.",
        cart_mobilepay_alert: "Tak fordi du støtter SEP.",
        cart_item_remove: "Fjern",
        cart_added_popup: "Lagt i kurven.",
        cart_copied_popup: "Ordrebesked kopieret.",
        cart_order_message_greeting: "Hej SEP. Her er min ordre:",

        sep_how_title: "Sådan bestiller du.",
        sep_how_step_1_title: "1. Vælg.",
        sep_how_step_1_body:
          "Vælg dit SEP produkt. Vælg størrelse og antal så det passer til dig.",
        sep_how_step_2_title: "2. Læg i kurv.",
        sep_how_step_2_body:
          "Tryk “Læg i kurv” på hvert produkt du vil have. Åbn kurven for at tjekke det hele.",
        sep_how_step_3_title: "3. Kopiér ordre.",
        sep_how_step_3_body:
          "Brug knappen “Kopiér ordrebesked” i kurven. Den kopierer alt inklusive størrelser og total.",
        sep_how_step_4_title: "4. Betal med MobilePay.",
        sep_how_step_4_body:
          "Send det samlede beløb til MobilePay <b>5894BZ</b>. Skriv dit navn i beskeden.",
        sep_how_step_5_title: "5. Send en DM.",
        sep_how_step_5_body:
          "Sæt beskeden ind i en DM til <b>@seproairesis</b> på Instagram eller TikTok. Vi leverer kun i Danmark.",

        sep_footer_main:
          "© SEP - Se Proairesis (Your Choice). Håndtrykt i København. MobilePay 5894BZ.",
        sep_footer_shipping:
          "+45 kr fragt i Danmark. Gratis levering i København.",
        sep_footer_privacy:
          "Ingen datasalg. Ingen reklamer der følger dig. Ingen creepy tracking. Bare en simpel butik.",
        sep_footer_ig_label: "Åbn Instagram",
        sep_footer_tt_label: "Åbn TikTok",

        sep_about_title: "Om SEP.",
        sep_about_p1:
          "SEP står for Se Proairesis. En gammel græsk idé som cirka betyder “Dit valg”. Brandet findes for at gøre det valg roligt og enkelt.",
        sep_about_p2:
          "I stedet for konstante drops og tunge logoer fokuserer SEP på få, rene styles. En hvid T shirt. En sort hoodie. Sorte bukser. Alt blødt og lavet i små serier i København.",
        sep_about_p3:
          "Du vælger størrelse, vælger hvor mange du vil have og sender en kort ordrebesked. Der er ikke et uendeligt katalog og ikke noget at holde trit med.",
        sep_about_privacy:
          "Bag kulissen er det også stille. Ingen datasalg. Ingen tracking på resten af nettet. Ingen tricks der skal få dig til at blive længere end nødvendigt.",
        sep_about_button_back_shop: "Tilbage til SEP butik",
        sep_about_button_go_mih: "Gå til Make It Happen"
      },
      cs: {
        nav_sep_shop: "SEP obchod",
        nav_sep_about: "O značce SEP",
        nav_mih: "Make It Happen",
        nav_mih_about: "O Make It Happen",
        nav_language: "Jazyk",

        exit_to_home: "Zpět na úvodní stránku",

        home_title_main: "SEP a Make It Happen.",
        home_title_sub: "Jedno klidné místo pro oblečení a pohyb.",
        home_intro_block_1_title: "SEP - Se Proairesis.",
        home_intro_block_1_body:
          "Minimalistické, severské oblečení z Kodaně. Malý obchod s bílým tričkem, černou mikinou a černými kalhotami. Vše je ručně lisované v malých sériích.",
        home_intro_block_2_title: "Make It Happen.",
        home_intro_block_2_body:
          "Jednoduchá výzva k pohybu. Běhej, choď nebo jeď na kole. Zapisuj vzdálenost. Sleduj, jak daleko se ty a tvoji kamarádi dostanete.",
        home_button_go_sep: "Přejít do obchodu SEP",
        home_button_go_mih: "Přejít na Make It Happen",

        sep_hero_title: "Minimalistické oblečení vytvořené s úmyslem.",
        sep_hero_subtitle: "Měkké, čisté a ručně lisované v Kodani.",
        sep_hero_shop_button: "Nakupovat",
        sep_hero_cart_button: "Zobrazit košík",

        sep_products_title: "Tři produkty. Jeden klidný šatník.",
        sep_products_subtitle:
          "Měkké, trvanlivé a jednoduché kousky na každý den.",
        sep_product_tshirt_name: "SEP bílé tričko",
        sep_product_hoodie_name: "SEP černá mikina",
        sep_product_trousers_name: "SEP černé kalhoty",
        sep_product_price_label: "180 kr.",

        cart_title: "Tvůj košík",
        cart_shipping_label: "Doručení",
        cart_shipping_cph: "Kodaň",
        cart_shipping_rest: "Zbytek Dánska",
        cart_shipping_note:
          "Kodaň má dopravu zdarma. Zbytek Dánska je +45 kr.",
        cart_empty: "Košík je prázdný.",
        cart_subtotal_label: "Mezisoučet",
        cart_shipping_cost_label: "Doprava",
        cart_total_label: "Celkem",
        cart_shipping_free_cph: "0 kr. (ZDARMA v Kodani)",
        cart_shipping_paid_other: "+45 kr.",
        cart_open_mobilepay: "Otevřít MobilePay",
        cart_copy_message: "Zkopírovat objednávku",
        cart_mobilepay_hint:
          "„Otevřít MobilePay“ funguje nejlépe na mobilu.",
        cart_mobilepay_alert: "Děkujeme za podporu značky SEP.",
        cart_item_remove: "Odebrat",
        cart_added_popup: "Přidáno do košíku.",
        cart_copied_popup: "Objednávka zkopírována.",
        cart_order_message_greeting: "Ahoj SEP. Tady je moje objednávka:",

        sep_how_title: "Jak objednat.",
        sep_how_step_1_title: "1. Vyber.",
        sep_how_step_1_body:
          "Vyber si kousek SEP. Nastav velikost a počet tak, aby ti seděl.",
        sep_how_step_2_title: "2. Dej do košíku.",
        sep_how_step_2_body:
          "U každého produktu, který chceš, stiskni „Přidat“. Pak otevři košík a vše zkontroluj.",
        sep_how_step_3_title: "3. Zkopíruj objednávku.",
        sep_how_step_3_body:
          "V košíku použij tlačítko „Zkopírovat objednávku“. Zkopíruje všechno včetně velikostí a součtů.",
        sep_how_step_4_title: "4. Zaplať přes MobilePay.",
        sep_how_step_4_body:
          "Pošli celkovou částku na MobilePay <b>5894BZ</b>. Do zprávy napiš své jméno.",
        sep_how_step_5_title: "5. Pošli DM.",
        sep_how_step_5_body:
          "Vlož zkopírovanou zprávu do DM pro <b>@seproairesis</b> na Instagramu nebo TikToku. Zatím doručujeme jen v Dánsku.",

        sep_footer_main:
          "© SEP - Se Proairesis (Your Choice). Ručně lisováno v Kodani. MobilePay 5894BZ.",
        sep_footer_shipping:
          "+45 kr doprava po celém Dánsku. Doprava zdarma v Kodani.",
        sep_footer_privacy:
          "Žádný prodej dat. Žádné reklamy, které tě sledují. Žádné creepy trackování. Jen jednoduchý obchod.",
        sep_footer_ig_label: "Otevřít Instagram",
        sep_footer_tt_label: "Otevřít TikTok",

        sep_about_title: "O značce SEP.",
        sep_about_p1:
          "SEP je zkratka pro Se Proairesis. Starý řecký pojem, který zhruba znamená „Tvoje volba“. Značka existuje proto, aby tahle volba byla klidná a jednoduchá.",
        sep_about_p2:
          "Místo nekonečných dropů a velkých log se SEP soustředí na pár čistých kousků. Bílé tričko. Černá mikina. Černé kalhoty. Vše měkké a dělané v malých sériích v Kodani.",
        sep_about_p3:
          "Vybereš velikost, množství a pošleš krátkou objednávku. Není tu nekonečný katalog ani tlak na to, abys pořád něco doháněl.",
        sep_about_privacy:
          "Na pozadí je ticho. Žádný prodej dat. Žádné sledování po internetu. Žádné triky, které by tě měly držet na stránce déle, než potřebuješ.",
        sep_about_button_back_shop: "Zpět do obchodu SEP",
        sep_about_button_go_mih: "Přejít na Make It Happen"
      }
    };

    let currentLang = "en";

    function translationGet(key) {
      const table = translations[currentLang] || {};
      if (Object.prototype.hasOwnProperty.call(table, key)) {
        return table[key];
      }
      const base = translations.en || {};
      if (Object.prototype.hasOwnProperty.call(base, key)) {
        return base[key];
      }
      return null;
    }

    function applyTranslations() {
      const elements = document.querySelectorAll("[data-i18n]");
      elements.forEach(function (el) {
        const key = el.getAttribute("data-i18n");
        const value = translationGet(key);
        if (value !== null && value !== undefined) {
          el.innerHTML = value;
        }
      });
    }

    function setLanguage(lang) {
      if (!translations[lang]) {
        lang = "en";
      }
      currentLang = lang;
      try {
        localStorage.setItem("sep_lang", lang);
      } catch (e) {}

      applyTranslations();

      const langButtons = document.querySelectorAll(".lang-btn");
      langButtons.forEach(function (btn) {
        const bLang = btn.getAttribute("data-lang");
        if (bLang === currentLang) {
          btn.classList.add("lang-btn-active");
        } else {
          btn.classList.remove("lang-btn-active");
        }
      });
    }

    function detectInitialLanguage() {
      let initial = "en";
      try {
        const stored = localStorage.getItem("sep_lang");
        if (stored && translations[stored]) {
          initial = stored;
        } else {
          const navLang = (navigator.language || navigator.userLanguage || "").toLowerCase();
          if (navLang.startsWith("da")) {
            initial = "da";
          } else if (navLang.startsWith("cs")) {
            initial = "cs";
          }
        }
      } catch (e) {}
      return initial;
    }

    // =========================================================
    // GLOBAL NAVIGATION + SCENE SWITCHING
    // =========================================================

    function showScene(name) {
      const scenes = document.querySelectorAll(".scene");
      scenes.forEach(function (scene) {
        scene.classList.remove("active");
      });

      const scene = document.getElementById("scene-" + name);
      if (scene) {
        scene.classList.add("active");
      }

      try {
        window.scrollTo(0, 0);
      } catch (e) {}
    }

    function setupGlobalNav() {
      const navToggle = document.getElementById("mainNavToggle");
      const navMenu = document.getElementById("navMenu");
      if (navToggle && navMenu) {
        navToggle.addEventListener("click", function () {
          navMenu.classList.toggle("show");
        });
      }

      const langButtons = document.querySelectorAll(".lang-btn");
      langButtons.forEach(function (btn) {
        btn.addEventListener("click", function () {
          const lang = btn.getAttribute("data-lang");
          setLanguage(lang);
        });
      });
    }

    // =========================================================
    // GSAP / SCROLLTRIGGER
    // =========================================================

    function setupAnimations() {
      if (typeof gsap === "undefined" || typeof ScrollTrigger === "undefined") {
        return;
      }

      gsap.registerPlugin(ScrollTrigger);

      const fadeSections = document.querySelectorAll(".fade-section");
      fadeSections.forEach(function (sec) {
        gsap.fromTo(
          sec,
          {
            opacity: 0,
            y: 32
          },
          {
            opacity: 1,
            y: 0,
            duration: 1,
            ease: "power2.out",
            scrollTrigger: {
              trigger: sec,
              start: "top 80%",
              once: true
            }
          }
        );
      });
    }

    // =========================================================
    // SEP CART LOGIC + MOBILEPAY
    // =========================================================

    const SEP_CART_KEY = "sep_cart_v1";
    const SEP_SHIPPING_BASE = 45;
    let sepCart = [];
    let sepIsCopenhagen = false;

    function loadSepCart() {
      try {
        const raw = localStorage.getItem(SEP_CART_KEY);
        if (!raw) {
          sepCart = [];
          return;
        }
        const parsed = JSON.parse(raw);
        if (Array.isArray(parsed)) {
          sepCart = parsed;
        } else {
          sepCart = [];
        }
      } catch (e) {
        sepCart = [];
      }
    }

    function saveSepCart() {
      try {
        localStorage.setItem(SEP_CART_KEY, JSON.stringify(sepCart));
      } catch (e) {}
    }

    function sepShippingCost() {
      return sepIsCopenhagen ? 0 : SEP_SHIPPING_BASE;
    }

    function sepUpdateShippingButtons() {
      const btnCph = document.getElementById("shippingCph");
      const btnRest = document.getElementById("shippingNonCph");

      if (!btnCph || !btnRest) {
        return;
      }

      if (sepIsCopenhagen) {
        btnCph.classList.add("bg-slate-900", "text-slate-50");
        btnCph.classList.remove("bg-slate-800", "text-slate-200");

        btnRest.classList.remove("bg-slate-900", "text-slate-50");
        btnRest.classList.add("bg-slate-800", "text-slate-200");
      } else {
        btnRest.classList.add("bg-slate-900", "text-slate-50");
        btnRest.classList.remove("bg-slate-800", "text-slate-200");

        btnCph.classList.remove("bg-slate-900", "text-slate-50");
        btnCph.classList.add("bg-slate-800", "text-slate-200");
      }
    }

    function sepPopup(message) {
      if (!message) {
        return;
      }

      const popup = document.createElement("div");
      popup.className = "popup";
      popup.textContent = message;
      document.body.appendChild(popup);

      requestAnimationFrame(function () {
        popup.classList.add("show");
      });

      setTimeout(function () {
        popup.classList.remove("show");
        setTimeout(function () {
          popup.remove();
        }, 300);
      }, 2000);
    }

    function sepUpdateCartCounter() {
      const badge = document.getElementById("cartCounter");
      if (!badge) {
        return;
      }

      const totalQty = sepCart.reduce(function (sum, item) {
        return sum + (item.qty || 0);
      }, 0);

      if (totalQty > 0) {
        badge.textContent = String(totalQty);
        badge.classList.remove("hidden");
      } else {
        badge.classList.add("hidden");
      }
    }

    function sepUpdateCartUI() {
      const itemsContainer = document.getElementById("cartItems");
      const subtotalEl = document.getElementById("cartSubtotal");
      const shippingLabelEl = document.getElementById("cartShippingLabel");
      const totalEl = document.getElementById("cartTotal");

      if (!itemsContainer || !subtotalEl || !shippingLabelEl || !totalEl) {
        return;
      }

      itemsContainer.innerHTML = "";

      if (!sepCart.length) {
        const p = document.createElement("p");
        const msg = translationGet("cart_empty") || "Your cart is empty.";
        p.textContent = msg;
        p.className = "text-xs text-slate-500 py-4";
        itemsContainer.appendChild(p);

        subtotalEl.textContent = "0 kr.";
        const freeText =
          translationGet("cart_shipping_paid_other") || "+45 kr.";
        shippingLabelEl.textContent = freeText;
        totalEl.textContent = "45 kr.";

        sepUpdateCartCounter();
        saveSepCart();
        return;
      }

      let subtotal = 0;

      sepCart.forEach(function (item, index) {
        const priceNumber = 180;
        const lineTotal = priceNumber * (item.qty || 0);
        subtotal += lineTotal;

        const row = document.createElement("div");
        row.className = "border-b border-slate-200 pb-2 mb-2";

        const mainLine = document.createElement("div");
        mainLine.className = "flex justify-between text-xs md:text-sm";

        const leftSpan = document.createElement("span");
        leftSpan.textContent = item.name || "";
        const rightSpan = document.createElement("span");
        rightSpan.textContent = lineTotal + " kr.";

        mainLine.appendChild(leftSpan);
        mainLine.appendChild(rightSpan);

        const subLine = document.createElement("div");
        subLine.className = "text-[11px] text-slate-500 mt-1";
        subLine.textContent =
          "Size: " + (item.size || "") + " · Qty: " + (item.qty || 0);

        const removeBtn = document.createElement("button");
        removeBtn.type = "button";
        removeBtn.className =
          "mt-1 text-[11px] text-red-500 hover:text-red-600 underline";
        removeBtn.textContent =
          translationGet("cart_item_remove") || "Remove";
        removeBtn.addEventListener("click", function () {
          sepRemoveFromCart(index);
        });

        row.appendChild(mainLine);
        row.appendChild(subLine);
        row.appendChild(removeBtn);

        itemsContainer.appendChild(row);
      });

      subtotalEl.textContent = subtotal + " kr.";

      const shipCost = sepShippingCost();
      if (shipCost === 0) {
        shippingLabelEl.textContent =
          translationGet("cart_shipping_free_cph") ||
          "0 kr. (FREE in Copenhagen)";
      } else {
        shippingLabelEl.textContent =
          translationGet("cart_shipping_paid_other") || "+45 kr.";
      }

      totalEl.textContent = subtotal + shipCost + " kr.";

      sepUpdateCartCounter();
      saveSepCart();
    }

    function sepAddToCart(name, size, qty) {
      const safeName = name || "";
      const safeSize = size || "M";
      const safeQty = qty > 0 ? qty : 1;

      const existingIndex = sepCart.findIndex(function (item) {
        return item.name === safeName && item.size === safeSize;
      });

      if (existingIndex >= 0) {
        sepCart[existingIndex].qty += safeQty;
      } else {
        sepCart.push({
          name: safeName,
          size: safeSize,
          qty: safeQty
        });
      }

      sepUpdateCartUI();

      const msg =
        translationGet("cart_added_popup") || "Added to cart.";
      sepPopup(msg);
    }

    function sepRemoveFromCart(index) {
      if (index < 0 || index >= sepCart.length) {
        return;
      }
      sepCart.splice(index, 1);
      sepUpdateCartUI();
    }

    function sepSetupProductButtons() {
      const productCards = document.querySelectorAll("[data-sep-product]");
      productCards.forEach(function (card) {
        const addBtn = card.querySelector(".sep-add-to-cart-btn");
        const sizeSelect = card.querySelector(".sep-size-select");
        const qtyInput = card.querySelector(".sep-qty-input");
        const nameEl = card.querySelector("[data-sep-product-name]");

        if (!addBtn || !sizeSelect || !qtyInput || !nameEl) {
          return;
        }

        addBtn.addEventListener("click", function () {
          const name = nameEl.textContent.trim();
          const size = sizeSelect.value || "M";
          const qty = parseInt(qtyInput.value, 10) || 1;
          sepAddToCart(name, size, qty);
        });
      });
    }

    function sepOpenCartSidebar() {
      const sidebar = document.getElementById("cartSidebar");
      const overlay = document.getElementById("cartOverlay");
      const nav = document.getElementById("globalNavButtons");
      const heroButtons = document.getElementById("sepHeroButtons");

      if (sidebar) {
        sidebar.classList.remove("translate-x-full");
      }
      if (overlay) {
        overlay.classList.remove("hidden");
      }
      if (nav) {
        nav.classList.add("opacity-40", "pointer-events-none");
      }
      if (heroButtons) {
        heroButtons.classList.add("opacity-20", "pointer-events-none");
      }
    }

    function sepCloseCartSidebar() {
      const sidebar = document.getElementById("cartSidebar");
      const overlay = document.getElementById("cartOverlay");
      const nav = document.getElementById("globalNavButtons");
      const heroButtons = document.getElementById("sepHeroButtons");

      if (sidebar) {
        sidebar.classList.add("translate-x-full");
      }
      if (overlay) {
        overlay.classList.add("hidden");
      }
      if (nav) {
        nav.classList.remove("opacity-40", "pointer-events-none");
      }
      if (heroButtons) {
        heroButtons.classList.remove("opacity-20", "pointer-events-none");
      }
    }

    function sepSetupCartSidebar() {
      const viewCartButton = document.getElementById("viewCartBtn");
      const overlay = document.getElementById("cartOverlay");
      const closeBtn = document.getElementById("closeCart");
      const shipCph = document.getElementById("shippingCph");
      const shipRest = document.getElementById("shippingNonCph");
      const openMobilePayBtn = document.getElementById("openMobilePay");
      const copyMsgBtn = document.getElementById("copyMobilePay");

      if (viewCartButton) {
        viewCartButton.addEventListener("click", function () {
          sepOpenCartSidebar();
        });
      }
      if (overlay) {
        overlay.addEventListener("click", function () {
          sepCloseCartSidebar();
        });
      }
      if (closeBtn) {
        closeBtn.addEventListener("click", function () {
          sepCloseCartSidebar();
        });
      }

      if (shipCph) {
        shipCph.addEventListener("click", function () {
          sepIsCopenhagen = true;
          sepUpdateShippingButtons();
          sepUpdateCartUI();
        });
      }
      if (shipRest) {
        shipRest.addEventListener("click", function () {
          sepIsCopenhagen = false;
          sepUpdateShippingButtons();
          sepUpdateCartUI();
        });
      }

      sepUpdateShippingButtons();

      if (openMobilePayBtn) {
        openMobilePayBtn.addEventListener("click", function () {
          const target = "5894BZ";
          try {
            window.location.href =
              "mobilepay://transfer?phone=" + encodeURIComponent(target);
          } catch (e) {}
          const msg =
            translationGet("cart_mobilepay_alert") ||
            "Thank you for supporting SEP.";
          alert(msg);
        });
      }

      if (copyMsgBtn) {
        copyMsgBtn.addEventListener("click", function () {
          sepCopyOrderMessage();
        });
      }
    }

    function sepCopyOrderMessage() {
      if (!navigator.clipboard) {
        return;
      }
      const subtotalEl = document.getElementById("cartSubtotal");
      const shippingEl = document.getElementById("cartShippingLabel");
      const totalEl = document.getElementById("cartTotal");

      const subtotalText = subtotalEl ? subtotalEl.textContent.trim() : "";
      const shippingText = shippingEl ? shippingEl.textContent.trim() : "";
      const totalText = totalEl ? totalEl.textContent.trim() : "";

      const greeting =
        translationGet("cart_order_message_greeting") ||
        "Hi SEP. Here is my order:";

      const lines = [];
      lines.push(greeting);

      sepCart.forEach(function (item) {
        lines.push(
          (item.qty || 0) +
            " x " +
            (item.name || "") +
            " (Size: " +
            (item.size || "") +
            ")"
        );
      });

      lines.push("");
      lines.push(
        (translationGet("cart_subtotal_label") || "Subtotal") +
          ": " +
          subtotalText
      );
      lines.push(
        (translationGet("cart_shipping_cost_label") || "Shipping") +
          ": " +
          shippingText
      );
      lines.push(
        (translationGet("cart_total_label") || "Total") +
          ": " +
          totalText
      );

      const fullMessage = lines.join("\n");

      navigator.clipboard.writeText(fullMessage).then(
        function () {
          const msg =
            translationGet("cart_copied_popup") ||
            "Order message copied.";
          sepPopup(msg);
        },
        function () {}
      );
    }

    // =========================================================
    // MAKE IT HAPPEN - DATA MODEL
    // =========================================================

    const MIH_STORAGE_ENTRIES_KEY = "mih_entries_v5";
    const MIH_STORAGE_USERS_KEY = "mih_users_v5";
    const MIH_STORAGE_CURRENT_USER_KEY = "mih_current_user_v5";
    const MIH_THIRTY_DAYS_MS = 30 * 24 * 60 * 60 * 1000;
    const MIH_LEAGUES = ["amateurs", "intermediates", "pros", "legends"];

    let mihEntries = [];
    let mihUsers = [];
    let mihCurrentUser = null;

    function mihGenerateId() {
      return (
        Date.now().toString(36) +
        Math.random().toString(36).slice(2, 10)
      );
    }

    function mihLoadEntries() {
      try {
        const raw = localStorage.getItem(MIH_STORAGE_ENTRIES_KEY);
        if (!raw) {
          mihEntries = [];
          return;
        }
        const parsed = JSON.parse(raw);
        if (Array.isArray(parsed)) {
          mihEntries = parsed;
        } else {
          mihEntries = [];
        }
      } catch (e) {
        mihEntries = [];
      }
    }

    function mihSaveEntries() {
      try {
        localStorage.setItem(
          MIH_STORAGE_ENTRIES_KEY,
          JSON.stringify(mihEntries)
        );
      } catch (e) {}
    }

    function mihLoadUsers() {
      try {
        const raw = localStorage.getItem(MIH_STORAGE_USERS_KEY);
        if (!raw) {
          mihUsers = [];
          return;
        }
        const parsed = JSON.parse(raw);
        if (Array.isArray(parsed)) {
          mihUsers = parsed;
        } else {
          mihUsers = [];
        }
      } catch (e) {
        mihUsers = [];
      }

      mihUsers.forEach(function (u) {
        if (!u.league || MIH_LEAGUES.indexOf(u.league) === -1) {
          u.league = "amateurs";
        }
      });
      mihSaveUsers();
    }

    function mihSaveUsers() {
      try {
        localStorage.setItem(
          MIH_STORAGE_USERS_KEY,
          JSON.stringify(mihUsers)
        );
      } catch (e) {}
    }

    function mihGetUserById(id) {
      return mihUsers.find(function (u) {
        return u.id === id;
      }) || null;
    }

    function mihGetUserByName(name) {
      const lower = (name || "").trim().toLowerCase();
      if (!lower) {
        return null;
      }
      return (
        mihUsers.find(function (u) {
          return (u.name || "").toLowerCase() === lower;
        }) || null
      );
    }

    function mihCountsByLeague() {
      const counts = {
        amateurs: 0,
        intermediates: 0,
        pros: 0,
        legends: 0
      };
      mihUsers.forEach(function (u) {
        if (counts[u.league] !== undefined) {
          counts[u.league] += 1;
        }
      });
      return counts;
    }

    function mihAssignStartingLeague() {
      const counts = mihCountsByLeague();
      let bestLeague = "amateurs";
      let bestCount = counts[bestLeague];
      MIH_LEAGUES.forEach(function (league) {
        if (counts[league] < bestCount) {
          bestLeague = league;
          bestCount = counts[league];
        }
      });
      return bestLeague;
    }

    function mihCleanupOldAccounts() {
      const now = Date.now();
      const currentId = (function () {
        try {
          return localStorage.getItem(
            MIH_STORAGE_CURRENT_USER_KEY
          );
        } catch (e) {
          return null;
        }
      })();

      const keepUsers = [];
      const removedIds = [];

      mihUsers.forEach(function (user) {
        const isCurrent =
          currentId && user.id && user.id === currentId;
        if (!user.lastLogoutAt || isCurrent) {
          keepUsers.push(user);
          return;
        }
        const delta = now - user.lastLogoutAt;
        if (delta > MIH_THIRTY_DAYS_MS) {
          removedIds.push(user.id);
        } else {
          keepUsers.push(user);
        }
      });

      mihUsers = keepUsers;

      if (removedIds.length) {
        mihEntries = mihEntries.filter(function (entry) {
          return removedIds.indexOf(entry.userId) === -1;
        });
      }

      mihSaveUsers();
      mihSaveEntries();
    }

    function mihFormatDate(ts) {
      if (!ts) {
        return "";
      }
      const d = new Date(ts);
      if (isNaN(d.getTime())) {
        return "";
      }
      return d.toLocaleDateString(undefined, {
        year: "numeric",
        month: "short",
        day: "numeric"
      });
    }

    function mihFormatMinutes(mins) {
      if (!mins || !isFinite(mins) || mins <= 0) {
        return "–";
      }
      const totalSeconds = Math.round(mins * 60);
      const m = Math.floor(totalSeconds / 60);
      const s = totalSeconds % 60;
      return m + ":" + String(s).padStart(2, "0");
    }

    function mihFormatImprovement(value) {
      if (!value || !isFinite(value)) {
        return "0%";
      }
      const rounded = Math.round(value);
      if (rounded === 0) {
        return "0%";
      }
      return (rounded > 0 ? "+" : "") + rounded + "%";
    }

    function mihComputeStatsByUser() {
      const byId = {};

      mihUsers.forEach(function (u) {
        byId[u.id] = {
          userId: u.id,
          name: u.name || "",
          league: u.league || "amateurs",
          runs: 0,
          totalDistance: 0,
          totalTime: 0,
          bestDistance: 0,
          baselineDistance: null,
          baselineTime: null
        };
      });

      mihEntries.forEach(function (entry) {
        const user = mihGetUserById(entry.userId);
        if (!user) {
          return;
        }
        const s = byId[user.id];
        if (!s) {
          return;
        }

        if (s.runs === 0) {
          s.baselineDistance = entry.distanceKm;
          s.baselineTime = entry.timeMinutes;
        }

        s.runs += 1;
        s.totalDistance += entry.distanceKm;
        s.totalTime += entry.timeMinutes;

        if (entry.distanceKm > s.bestDistance) {
          s.bestDistance = entry.distanceKm;
        }
      });

      const players = Object.values(byId);

      players.forEach(function (p) {
        p.avgDistance =
          p.runs > 0 ? p.totalDistance / p.runs : 0;
        p.avgPace =
          p.totalDistance > 0
            ? p.totalTime / p.totalDistance
            : null;

        let distImp = 0;
        if (p.baselineDistance && p.runs > 1) {
          distImp =
            ((p.avgDistance - p.baselineDistance) /
              p.baselineDistance) *
            100;
        }

        let paceImp = 0;
        if (
          p.baselineTime &&
          p.baselineDistance &&
          p.runs > 1
        ) {
          const basePace = p.baselineTime / p.baselineDistance;
          if (basePace > 0 && p.avgPace) {
            paceImp =
              ((basePace - p.avgPace) / basePace) * 100;
          }
        }

        p.improvement = distImp + paceImp;
      });

      players.sort(function (a, b) {
        if (b.totalDistance !== a.totalDistance) {
          return b.totalDistance - a.totalDistance;
        }
        if (b.runs !== a.runs) {
          return b.runs - a.runs;
        }
        const speedA =
          a.totalTime > 0
            ? a.totalDistance / a.totalTime
            : 0;
        const speedB =
          b.totalTime > 0
            ? b.totalDistance / b.totalTime
            : 0;
        if (speedB !== speedA) {
          return speedB - speedA;
        }
        return a.totalTime - b.totalTime;
      });

      players.forEach(function (p, idx) {
        p.rank = idx + 1;
      });

      return players;
    }

    // =========================================================
    // MIH RENDERERS
    // =========================================================

    function mihRenderUserChip() {
      const container = document.getElementById(
        "mihUserHeaderControls"
      );
      const nameInput = document.getElementById("mihEntryName");
      const myCountEl = document.getElementById(
        "mihMyActivityCount"
      );

      if (!container) {
        return;
      }

      container.innerHTML = "";

      if (!mihCurrentUser) {
        const status = document.createElement("span");
        status.className = "text-[11px] text-slate-300";
        status.textContent = "Not logged in.";

        const btn = document.createElement("button");
        btn.type = "button";
        btn.className =
          "px-3 py-1 rounded-full border border-slate-500 text-slate-100 text-[11px]";
        btn.textContent = "Go to login";
        btn.addEventListener("click", function () {
          showScene("mih-login");
        });

        container.appendChild(status);
        container.appendChild(btn);

        if (nameInput) {
          nameInput.value = "";
          nameInput.placeholder =
            "Log in on the Login screen to set your name.";
        }
        if (myCountEl) {
          myCountEl.textContent = "";
        }
        return;
      }

      const status = document.createElement("span");
      status.className = "text-[11px] text-slate-300";
      status.innerHTML =
        'Logged in as <span class="font-semibold">' +
        (mihCurrentUser.name || "") +
        "</span> · " +
        '<span class="px-2 py-0.5 rounded-full border border-slate-500 text-[10px] uppercase tracking-wide">' +
        (mihCurrentUser.league || "amateurs") +
        "</span>";

      const logoutBtn = document.createElement("button");
      logoutBtn.type = "button";
      logoutBtn.className =
        "px-3 py-1 rounded-full border border-slate-500 text-slate-100 text-[11px]";
      logoutBtn.textContent = "Log out";
      logoutBtn.addEventListener("click", function () {
        mihLogout();
      });

      const deleteBtn = document.createElement("button");
      deleteBtn.type = "button";
      deleteBtn.className =
        "px-3 py-1 rounded-full border border-red-400 text-red-100 text-[11px]";
      deleteBtn.textContent = "Delete account";
      deleteBtn.addEventListener("click", function () {
        mihDeleteAccount();
      });

      container.appendChild(status);
      container.appendChild(logoutBtn);
      container.appendChild(deleteBtn);

      if (nameInput) {
        nameInput.value = mihCurrentUser.name || "";
        nameInput.placeholder = "";
      }

      if (myCountEl) {
        const myEntries = mihEntries.filter(function (e) {
          return e.userId === mihCurrentUser.id;
        });
        if (myEntries.length) {
          myCountEl.textContent =
            myEntries.length + " activity(ies).";
        } else {
          myCountEl.textContent = "No activities yet.";
        }
      }
    }

    function mihRenderLeaderboard() {
      const tbody = document.getElementById(
        "mihLeaderboardBody"
      );
      const emptyEl = document.getElementById(
        "mihLeaderboardEmpty"
      );
      const filterSelect = document.getElementById(
        "mihLeagueFilter"
      );

      if (!tbody) {
        return;
      }

      tbody.innerHTML = "";

      const players = mihComputeStatsByUser();

      let filtered = players;
      if (filterSelect && filterSelect.value !== "all") {
        const league = filterSelect.value;
        filtered = players.filter(function (p) {
          return p.league === league;
        });
      }

      if (!filtered.length) {
        if (emptyEl) {
          emptyEl.style.display = "block";
        }
        return;
      }

      if (emptyEl) {
        emptyEl.style.display = "none";
      }

      filtered.forEach(function (p) {
        const tr = document.createElement("tr");
        tr.className = "border-b border-slate-700";

        let rankSymbol = p.rank;
        if (p.rank === 1) {
          rankSymbol = "🥇";
        } else if (p.rank === 2) {
          rankSymbol = "🥈";
        } else if (p.rank === 3) {
          rankSymbol = "🥉";
        }

        const tdRank = document.createElement("td");
        tdRank.className = "py-2 pr-2";
        tdRank.textContent = rankSymbol;

        const tdName = document.createElement("td");
        tdName.className = "py-2 px-2";

        const nameBtn = document.createElement("button");
        nameBtn.type = "button";
        nameBtn.className =
          "underline text-slate-100 text-xs md:text-sm";
        nameBtn.textContent = p.name || "";
        nameBtn.addEventListener("click", function () {
          mihOpenProfile(p.userId);
        });

        tdName.appendChild(nameBtn);

        const tdLeague = document.createElement("td");
        tdLeague.className = "py-2 px-2";

        const badge = document.createElement("span");
        badge.className =
          "px-2 py-0.5 rounded-full border border-slate-500 text-[10px] uppercase tracking-wide";
        badge.textContent = p.league || "";
        tdLeague.appendChild(badge);

        const tdTotalDistance = document.createElement("td");
        tdTotalDistance.className = "py-2 px-2";
        tdTotalDistance.textContent =
          (p.totalDistance || 0).toFixed(2) + " km";

        const tdTotalTime = document.createElement("td");
        tdTotalTime.className = "py-2 px-2";
        tdTotalTime.textContent =
          (p.totalTime || 0).toFixed(1) + " min";

        const tdAvgDistance = document.createElement("td");
        tdAvgDistance.className =
          "py-2 px-2 hidden lg:table-cell";
        tdAvgDistance.textContent =
          (p.avgDistance || 0).toFixed(2) + " km";

        const tdBestDistance = document.createElement("td");
        tdBestDistance.className =
          "py-2 px-2 hidden lg:table-cell";
        tdBestDistance.textContent =
          (p.bestDistance || 0).toFixed(2) + " km";

        const tdImprovement = document.createElement("td");
        tdImprovement.className =
          "py-2 px-2 hidden lg:table-cell";
        tdImprovement.textContent = mihFormatImprovement(
          p.improvement
        );

        tr.appendChild(tdRank);
        tr.appendChild(tdName);
        tr.appendChild(tdLeague);
        tr.appendChild(tdTotalDistance);
        tr.appendChild(tdTotalTime);
        tr.appendChild(tdAvgDistance);
        tr.appendChild(tdBestDistance);
        tr.appendChild(tdImprovement);

        tbody.appendChild(tr);
      });
    }

    function mihRenderStats() {
      const tbody = document.getElementById("mihStatsBody");
      const emptyEl = document.getElementById("mihStatsEmpty");

      if (!tbody) {
        return;
      }

      tbody.innerHTML = "";

      const players = mihComputeStatsByUser();
      if (!players.length) {
        if (emptyEl) {
          emptyEl.style.display = "block";
        }
        return;
      }

      if (emptyEl) {
        emptyEl.style.display = "none";
      }

      players.forEach(function (p) {
        const tr = document.createElement("tr");
        tr.className = "border-b border-slate-700";

        const tdName = document.createElement("td");
        tdName.className = "py-2 px-2";
        tdName.textContent = p.name || "";

        const tdLeague = document.createElement("td");
        tdLeague.className = "py-2 px-2";
        tdLeague.textContent = p.league || "";

        const tdRuns = document.createElement("td");
        tdRuns.className = "py-2 px-2";
        tdRuns.textContent = p.runs || 0;

        const tdTotalDistance = document.createElement("td");
        tdTotalDistance.className = "py-2 px-2";
        tdTotalDistance.textContent =
          (p.totalDistance || 0).toFixed(2) + " km";

        const tdTotalTime = document.createElement("td");
        tdTotalTime.className = "py-2 px-2";
        tdTotalTime.textContent =
          (p.totalTime || 0).toFixed(1) + " min";

        const tdAvgDistance = document.createElement("td");
        tdAvgDistance.className = "py-2 px-2";
        tdAvgDistance.textContent =
          (p.avgDistance || 0).toFixed(2) + " km";

        const tdBestDistance = document.createElement("td");
        tdBestDistance.className = "py-2 px-2";
        tdBestDistance.textContent =
          (p.bestDistance || 0).toFixed(2) + " km";

        const tdImprovement = document.createElement("td");
        tdImprovement.className = "py-2 px-2";
        tdImprovement.textContent = mihFormatImprovement(
          p.improvement
        );

        tr.appendChild(tdName);
        tr.appendChild(tdLeague);
        tr.appendChild(tdRuns);
        tr.appendChild(tdTotalDistance);
        tr.appendChild(tdTotalTime);
        tr.appendChild(tdAvgDistance);
        tr.appendChild(tdBestDistance);
        tr.appendChild(tdImprovement);

        tbody.appendChild(tr);
      });
    }

    function mihRenderMyActivities() {
      const tbody = document.getElementById(
        "mihMyActivitiesBody"
      );
      const emptyEl = document.getElementById(
        "mihMyActivitiesEmpty"
      );
      const countEl = document.getElementById(
        "mihMyActivityCount"
      );

      if (!tbody) {
        return;
      }

      tbody.innerHTML = "";

      if (!mihCurrentUser) {
        if (emptyEl) {
          emptyEl.textContent =
            "Log in to see and manage your activities.";
          emptyEl.style.display = "block";
        }
        if (countEl) {
          countEl.textContent = "";
        }
        return;
      }

      const myEntries = mihEntries
        .filter(function (e) {
          return e.userId === mihCurrentUser.id;
        })
        .sort(function (a, b) {
          return b.timestamp - a.timestamp;
        });

      if (!myEntries.length) {
        if (emptyEl) {
          emptyEl.textContent =
            "No activities yet for this account.";
          emptyEl.style.display = "block";
        }
        if (countEl) {
          countEl.textContent = "No activities yet.";
        }
        return;
      }

      if (emptyEl) {
        emptyEl.style.display = "none";
      }
      if (countEl) {
        countEl.textContent =
          myEntries.length + " activity(ies).";
      }

      myEntries.forEach(function (entry) {
        const tr = document.createElement("tr");
        tr.className = "border-b border-slate-700";

        const tdDate = document.createElement("td");
        tdDate.className = "py-2 px-2";
        tdDate.textContent = mihFormatDate(entry.timestamp);

        const tdDistance = document.createElement("td");
        tdDistance.className = "py-2 px-2";
        tdDistance.textContent =
          (entry.distanceKm || 0).toFixed(2) + " km";

        const tdTime = document.createElement("td");
        tdTime.className = "py-2 px-2";
        tdTime.textContent =
          (entry.timeMinutes || 0).toFixed(1) + " min";

        const tdActions = document.createElement("td");
        tdActions.className = "py-2 px-2 text-right";

        const deleteBtn = document.createElement("button");
        deleteBtn.type = "button";
        deleteBtn.className =
          "text-[11px] text-red-300 underline";
        deleteBtn.textContent = "Delete";
        deleteBtn.addEventListener("click", function () {
          mihDeleteActivity(entry.id);
        });

        tdActions.appendChild(deleteBtn);

        tr.appendChild(tdDate);
        tr.appendChild(tdDistance);
        tr.appendChild(tdTime);
        tr.appendChild(tdActions);

        tbody.appendChild(tr);
      });
    }

    function mihOpenProfile(userId) {
      const user = mihGetUserById(userId);
      if (!user) {
        return;
      }

      const entries = mihEntries.filter(function (e) {
        return e.userId === user.id;
      });

      let totalDistance = 0;
      let totalTime = 0;

      entries.forEach(function (e) {
        totalDistance += e.distanceKm;
        totalTime += e.timeMinutes;
      });

      const runs = entries.length;
      const avgDistance =
        runs > 0 ? totalDistance / runs : 0;
      const avgPace =
        totalDistance > 0 ? totalTime / totalDistance : null;

      let best5k = null;
      let best10k = null;
      let best100m = null;

      if (avgPace) {
        best5k = avgPace * 5;
        best10k = avgPace * 10;
        best100m = avgPace * 0.1;
      }

      const nameEl = document.getElementById(
        "mihProfileName"
      );
      const leagueEl = document.getElementById(
        "mihProfileLeague"
      );
      const totalDistEl = document.getElementById(
        "mihProfileTotalDistance"
      );
      const totalTimeEl = document.getElementById(
        "mihProfileTotalTime"
      );
      const runsEl = document.getElementById(
        "mihProfileRuns"
      );
      const avgDistEl = document.getElementById(
        "mihProfileAvgDistance"
      );
      const best5kEl = document.getElementById(
        "mihProfileBest5k"
      );
      const best10kEl = document.getElementById(
        "mihProfileBest10k"
      );
      const best100mEl = document.getElementById(
        "mihProfileBest100m"
      );

      if (nameEl) {
        nameEl.textContent = user.name || "";
      }
      if (leagueEl) {
        leagueEl.textContent =
          "League: " + (user.league || "amateurs");
      }
      if (totalDistEl) {
        totalDistEl.textContent =
          totalDistance.toFixed(2) + " km";
      }
      if (totalTimeEl) {
        totalTimeEl.textContent =
          totalTime.toFixed(1) + " min";
      }
      if (runsEl) {
        runsEl.textContent = String(runs);
      }
      if (avgDistEl) {
        avgDistEl.textContent =
          runs > 0
            ? avgDistance.toFixed(2) + " km"
            : "–";
      }
      if (best5kEl) {
        best5kEl.textContent = best5k
          ? mihFormatMinutes(best5k)
          : "–";
      }
      if (best10kEl) {
        best10kEl.textContent = best10k
          ? mihFormatMinutes(best10k)
          : "–";
      }
      if (best100mEl) {
        best100mEl.textContent = best100m
          ? mihFormatMinutes(best100m)
          : "–";
      }

      showScene("mih-profile");
    }

    // =========================================================
    // MIH AUTH / MUTATION
    // =========================================================

    function mihSetCurrentUser(user) {
      mihCurrentUser = user || null;
      try {
        if (mihCurrentUser && mihCurrentUser.id) {
          localStorage.setItem(
            MIH_STORAGE_CURRENT_USER_KEY,
            mihCurrentUser.id
          );
        } else {
          localStorage.removeItem(
            MIH_STORAGE_CURRENT_USER_KEY
          );
        }
      } catch (e) {}
      mihRenderUserChip();
      mihRenderMyActivities();
    }

    function mihLogin(name, password) {
      const trimmedName = (name || "").trim();
      if (!trimmedName || !password) {
        alert("Please enter both name and password.");
        return;
      }

      let user = mihGetUserByName(trimmedName);
      if (!user) {
        const league = mihAssignStartingLeague();
        user = {
          id: mihGenerateId(),
          name: trimmedName,
          password: password,
          league: league,
          createdAt: Date.now(),
          lastLoginAt: Date.now(),
          lastLogoutAt: null
        };
        mihUsers.push(user);
        mihSaveUsers();
      } else {
        if (user.password !== password) {
          alert("Wrong password for this name.");
          return;
        }
        user.lastLoginAt = Date.now();
        mihSaveUsers();
      }

      mihSetCurrentUser(user);
      showScene("mih-welcome");
    }

    function mihLogout() {
      if (!mihCurrentUser) {
        return;
      }
      const user = mihGetUserById(mihCurrentUser.id);
      if (user) {
        user.lastLogoutAt = Date.now();
        mihSaveUsers();
      }
      mihSetCurrentUser(null);
      showScene("mih-login");
    }

    function mihDeleteAccount() {
      if (!mihCurrentUser) {
        return;
      }
      if (
        !confirm(
          "This will delete your account and all your activities on this browser."
        )
      ) {
        return;
      }
      const id = mihCurrentUser.id;
      mihUsers = mihUsers.filter(function (u) {
        return u.id !== id;
      });
      mihEntries = mihEntries.filter(function (e) {
        return e.userId !== id;
      });
      mihSaveUsers();
      mihSaveEntries();
      mihSetCurrentUser(null);
      showScene("mih-login");
    }

    function mihDeleteActivity(entryId) {
      if (!mihCurrentUser) {
        alert("You must be logged in to delete activities.");
        return;
      }
      if (
        !confirm("Delete this activity from your history?")
      ) {
        return;
      }
      mihEntries = mihEntries.filter(function (e) {
        return e.id !== entryId;
      });
      mihSaveEntries();
      mihRenderLeaderboard();
      mihRenderStats();
      mihRenderMyActivities();
    }

    // =========================================================
    // MIH FORM SETUP
    // =========================================================

    function mihSetupForms() {
      const loginForm = document.getElementById(
        "mihLoginForm"
      );
      if (loginForm) {
        loginForm.addEventListener("submit", function (e) {
          e.preventDefault();
          const nameInput = document.getElementById(
            "mihLoginName"
          );
          const passInput = document.getElementById(
            "mihLoginPassword"
          );
          const name = nameInput ? nameInput.value : "";
          const password = passInput ? passInput.value : "";
          mihLogin(name, password);
          loginForm.reset();
        });
      }

      const entryForm = document.getElementById(
        "mihEntryForm"
      );
      if (entryForm) {
        entryForm.addEventListener("submit", function (e) {
          e.preventDefault();
          if (!mihCurrentUser) {
            alert(
              "Please log in on the Login screen before you add activities."
            );
            showScene("mih-login");
            return;
          }
          const distanceInput =
            document.getElementById("mihEntryDistance");
          const timeInput =
            document.getElementById("mihEntryTime");

          const distance = parseFloat(
            distanceInput ? distanceInput.value : "0"
          );
          const time = parseFloat(
            timeInput ? timeInput.value : "0"
          );

          if (
            !distance ||
            !time ||
            !isFinite(distance) ||
            !isFinite(time) ||
            distance <= 0 ||
            time <= 0
          ) {
            alert(
              "Please enter a valid distance and time greater than zero."
            );
            return;
          }

          mihEntries.push({
            id: mihGenerateId(),
            userId: mihCurrentUser.id,
            distanceKm: distance,
            timeMinutes: time,
            timestamp: Date.now()
          });

          mihSaveEntries();
          mihRenderLeaderboard();
          mihRenderStats();
          mihRenderMyActivities();

          entryForm.reset();
          showScene("mih-leaderboard");
        });
      }

      const leagueFilter = document.getElementById(
        "mihLeagueFilter"
      );
      if (leagueFilter) {
        leagueFilter.addEventListener("change", function () {
          mihRenderLeaderboard();
        });
      }
    }

    // =========================================================
    // INITIALISATION
    // =========================================================

    function initAll() {
      const initialLang = detectInitialLanguage();
      setLanguage(initialLang);

      setupGlobalNav();
      setupAnimations();

      loadSepCart();
      sepUpdateCartUI();
      sepSetupProductButtons();
      sepSetupCartSidebar();

      mihLoadEntries();
      mihLoadUsers();
      mihCleanupOldAccounts();

      let storedCurrentId = null;
      try {
        storedCurrentId = localStorage.getItem(
          MIH_STORAGE_CURRENT_USER_KEY
        );
      } catch (e) {
        storedCurrentId = null;
      }

      if (storedCurrentId) {
        const user = mihGetUserById(storedCurrentId);
        if (user) {
          mihSetCurrentUser(user);
        } else {
          mihSetCurrentUser(null);
        }
      } else {
        mihSetCurrentUser(null);
      }

      mihRenderLeaderboard();
      mihRenderStats();
      mihRenderMyActivities();

      showScene("home");
    }

    function loadSepCart() {
      try {
        const raw = localStorage.getItem(SEP_CART_KEY);
        if (!raw) {
          sepCart = [];
          return;
        }
        const parsed = JSON.parse(raw);
        if (Array.isArray(parsed)) {
          sepCart = parsed;
        } else {
          sepCart = [];
        }
      } catch (e) {
        sepCart = [];
      }
    }

    document.addEventListener("DOMContentLoaded", initAll);
  </script>
</body>
</html>
