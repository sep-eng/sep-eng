<!DOCTYPE html>
<html lang="en">
<head>
  <!-- 
    SEP + MAKE IT HAPPEN
    Single page site with multiple scenes.
    This is PART 1 of 4 (when you paste everything together it becomes one file).
  -->
  <meta charset="UTF-8" />
  <meta 
    name="viewport" 
    content="width=device-width, initial-scale=1.0" 
  />
  <title>
    SEP | Your Choice
  </title>
  <meta 
    name="description" 
    content="Minimalist clothing made with intention. Hand-pressed in Copenhagen." 
  />
  <link 
    rel="icon" 
    href="https://upload.wikimedia.org/wikipedia/commons/3/3f/Black_square.jpg" 
  />

  <!-- Inter font -->
  <link 
    href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&display=swap" 
    rel="stylesheet" 
  />

  <!-- Tailwind via CDN -->
  <script src="https://cdn.tailwindcss.com"></script>

  <!-- GSAP + ScrollTrigger -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/gsap.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/ScrollTrigger.min.js"></script>

  <style>
    /* 
      Global base styles 
    */
    body {
      font-family: 'Inter', sans-serif;
      background: linear-gradient(
        to bottom,
        #000000,
        #ffffff
      );
      color: #111111;
      transition: background 0.5s, color 0.5s;
      scroll-behavior: smooth;
    }

    h1,
    h2,
    h3,
    p,
    select,
    input,
    button,
    span {
      transition: 
        color 0.5s, 
        background-color 0.5s, 
        border-color 0.5s;
    }

    .theme-text {
      color: #e6e6e6;
    }

    button,
    a {
      transition: all 0.25s ease;
    }

    button:hover,
    a:hover {
      transform: translateY(-2px);
    }

    /* Small green popup used for feedback (added to cart / copied message) */
    .popup {
      position: fixed;
      top: 20px;
      right: 20px;
      background: #16a34a;
      color: #ffffff;
      padding: 10px 16px;
      border-radius: 8px;
      opacity: 0;
      transition: opacity 0.3s;
      z-index: 100;
      font-size: 13px;
    }

    .popup.show {
      opacity: 1;
    }

    /* Sections that fade in on scroll */
    .fade-section {
      opacity: 0;
      transform: translateY(30px);
    }

    /* Cart sidebar base */
    #cartSidebar {
      color: #000000;
      transition: background 0.5s, color 0.5s;
    }

    /* Scenes: only one visible at a time */
    .scene {
      display: none;
    }

    .scene.active {
      display: block;
    }

    /* GLOBAL NAV BUTTON GROUP (top-right) */
    #globalNavButtons {
      position: fixed;
      top: 10px;
      right: 12px;
      z-index: 70;
      display: flex;
      flex-direction: column;
      gap: 6px;
    }

    /* Hamburger main button */
    .nav-toggle-btn {
      background: rgba(0, 0, 0, 0.8);
      color: #ffffff;
      border-radius: 9999px;
      padding: 6px 10px;
      font-size: 10px;
      border: 1px solid rgba(255, 255, 255, 0.3);
      display: flex;
      align-items: center;
      gap: 6px;
    }

    /* The three lines icon */
    .nav-lines {
      display: inline-block;
      width: 14px;
      height: 10px;
      position: relative;
    }

    .nav-lines span {
      position: absolute;
      left: 0;
      right: 0;
      height: 2px;
      background: #ffffff;
      border-radius: 999px;
    }

    .nav-lines span:nth-child(1) {
      top: 0;
    }

    .nav-lines span:nth-child(2) {
      top: 4px;
    }

    .nav-lines span:nth-child(3) {
      top: 8px;
    }

    /* Dropdown nav under the button */
    #navMenu {
      margin-top: 4px;
      background: rgba(0, 0, 0, 0.85);
      border-radius: 9999px;
      padding: 4px 6px;
      border: 1px solid rgba(255, 255, 255, 0.25);
      display: none;
      flex-direction: column;
      gap: 4px;
    }

    #navMenu.show {
      display: flex;
    }

    #navMenu button {
      font-size: 10px;
      padding: 4px 8px;
      border-radius: 9999px;
      border: 1px solid rgba(255, 255, 255, 0.15);
      background: transparent;
      color: #f3f3f3;
      white-space: nowrap;
    }

    /* MIH cards */
    .mih-card {
      background: rgba(255, 255, 255, 0.04);
      border-radius: 16px;
      border: 1px solid rgba(255, 255, 255, 0.12);
      box-shadow: 0 18px 45px rgba(0, 0, 0, 0.45);
    }

    /* Small helper to fade elements when cart is open */
    .hidden-during-cart {
      transition: opacity 0.2s;
    }

    /* Simple profile layout for MIH profile page */
    .profile-label {
      font-size: 11px;
      text-transform: uppercase;
      letter-spacing: 0.08em;
      color: #9ca3af;
    }

    .profile-value {
      font-size: 14px;
    }
  </style>

  <script>
    // GSAP scroll fade in
    window.addEventListener(
      'load',
      () => {
        gsap.registerPlugin(ScrollTrigger);

        gsap.utils
          .toArray('.fade-section')
          .forEach((sec) => {
            gsap.to(
              sec,
              {
                opacity: 1,
                y: 0,
                duration: 1,
                scrollTrigger: {
                  trigger: sec,
                  start: 'top 80%',
                  once: true
                }
              }
            );
          });
      }
    );
  </script>
</head>

<body>

  <!-- 
    GLOBAL NAV BUTTONS 
    Works on all scenes, fades when cart opens.
  -->
  <div 
    id="globalNavButtons" 
    class="hidden-during-cart"
  >
    <button 
      id="mainNavToggle" 
      class="nav-toggle-btn" 
      type="button"
    >
      <span class="nav-lines">
        <span></span>
        <span></span>
        <span></span>
      </span>
      <span>
        Menu
      </span>
    </button>

    <div id="navMenu">
      <button 
        type="button" 
        onclick="showScene('sep-shop')"
      >
        SEP shop
      </button>

      <button 
        type="button" 
        onclick="showScene('sep-about')"
      >
        About SEP
      </button>

      <button 
        type="button" 
        onclick="showScene('mih-welcome')"
      >
        Make it happen
      </button>

      <button 
        type="button" 
        onclick="showScene('mih-about')"
      >
        About Make it happen
      </button>
    </div>
  </div>

  <!-- 
    ======================
    SCENE: SEP SHOP
    ======================
  -->
  <section 
    id="scene-sep-shop" 
    class="scene active"
  >
    <!-- Hero -->
    <header class="py-20 text-center fade-section">
      <h1 class="theme-text text-5xl font-bold mb-4">
        Minimalist clothing made with intention.
      </h1>

      <p class="theme-text text-lg mb-8">
        Soft, clean and hand-pressed in Copenhagen.
      </p>

      <div 
        id="sepHeroButtons" 
        class="flex justify-center gap-4 hidden-during-cart"
      >
        <!-- Scrolls down to the products section -->
        <a 
          href="#products" 
          class="bg-white text-black px-6 py-3 rounded-full font-medium"
        >
          Shop now
        </a>

        <!-- Opens cart sidebar -->
        <button 
          id="viewCartBtn" 
          class="border border-white text-white px-6 py-3 rounded-full font-medium relative"
        >
          View cart

          <!-- Cart counter bubble -->
          <span 
            id="cartCounter" 
            class="absolute -top-2 -right-2 bg-red-600 text-white rounded-full w-6 h-6 flex items-center justify-center text-xs hidden"
          >
            0
          </span>
        </button>
      </div>
    </header>

    <!-- Product grid -->
    <section 
      id="products" 
      class="py-20 px-6 fade-section"
    >
      <div class="text-center mb-12">
        <h2 class="theme-text text-4xl font-bold mb-4">
          Three products. One choice.
        </h2>

        <p class="theme-text">
          Soft, durable and timeless.
        </p>
      </div>

      <div class="grid grid-cols-1 md:grid-cols-3 gap-8 max-w-6xl mx-auto">
        <!-- White T shirt -->
        <div class="product-card bg-white/10 p-6 rounded-xl shadow-md text-center backdrop-blur">
          <img 
            src="https://images.pexels.com/photos/1002638/pexels-photo-1002638.jpeg?auto=compress&cs=tinysrgb&w=1200" 
            class="w-full h-64 object-cover rounded mb-4" 
            alt="White T-shirt on a simple hanger"
          />

          <h3 class="text-xl font-bold mb-2">
            SEP White T-shirt
          </h3>

          <p class="mb-2">
            180 kr.
          </p>

          <select class="theme-text border rounded px-3 py-2 mb-2 bg-transparent">
            <option>XS</option>
            <option>S</option>
            <option>M</option>
            <option>L</option>
            <option>XL</option>
          </select>

          <div class="flex justify-center gap-2">
            <input 
              type="number" 
              min="1" 
              value="1" 
              class="theme-text border rounded w-16 text-center bg-transparent quantity-selector"
            />

            <button class="add-to-cart bg-white text-black px-4 py-2 rounded">
              Add
            </button>
          </div>
        </div>

        <!-- Black Hoodie -->
        <div class="product-card bg-white/10 p-6 rounded-xl shadow-md text-center backdrop-blur">
          <img 
            src="https://images.pexels.com/photos/6311576/pexels-photo-6311576.jpeg?auto=compress&cs=tinysrgb&w=1200" 
            class="w-full h-64 object-cover rounded mb-4" 
            alt="Black hoodie in soft light"
          />

          <h3 class="text-xl font-bold mb-2">
            SEP Black Hoodie
          </h3>

          <p class="mb-2">
            180 kr.
          </p>

          <select class="theme-text border rounded px-3 py-2 mb-2 bg-transparent">
            <option>XS</option>
            <option>S</option>
            <option>M</option>
            <option>L</option>
            <option>XL</option>
          </select>

          <div class="flex justify-center gap-2">
            <input 
              type="number" 
              min="1" 
              value="1" 
              class="theme-text border rounded w-16 text-center bg-transparent quantity-selector"
            />

            <button class="add-to-cart bg-white text-black px-4 py-2 rounded">
              Add
            </button>
          </div>
        </div>

        <!-- Black Trousers -->
        <div class="product-card bg-white/10 p-6 rounded-xl shadow-md text-center backdrop-blur">
          <img 
            src="https://images.pexels.com/photos/7671181/pexels-photo-7671181.jpeg?auto=compress&cs=tinysrgb&w=1200" 
            class="w-full h-64 object-cover rounded mb-4" 
            alt="Black trousers folded neatly"
          />

          <h3 class="text-xl font-bold mb-2">
            SEP Black Trousers
          </h3>

          <p class="mb-2">
            180 kr.
          </p>

          <select class="theme-text border rounded px-3 py-2 mb-2 bg-transparent">
            <option>XS</option>
            <option>S</option>
            <option>M</option>
            <option>L</option>
            <option>XL</option>
          </select>

          <div class="flex justify-center gap-2">
            <input 
              type="number" 
              min="1" 
              value="1" 
              class="theme-text border rounded w-16 text-center bg-transparent quantity-selector"
            />

            <button class="add-to-cart bg-white text-black px-4 py-2 rounded">
              Add
            </button>
          </div>
        </div>
      </div>
    </section>

    <!-- Cart sidebar -->
    <div 
      id="cartSidebar" 
      class="fixed top-0 right-0 h-full w-80 bg-white shadow-xl translate-x-full transition-transform duration-300 z-50 overflow-y-auto"
    >
      <div class="p-6">
        <div class="flex justify-between items-center mb-4">
          <h3 class="text-xl font-bold">
            Your cart
          </h3>

          <button id="closeCart">
            ✕
          </button>
        </div>

        <!-- Shipping choice -->
        <div class="mb-4 text-sm">
          <p class="mb-1 font-medium">
            Shipping destination
          </p>

          <div class="flex gap-2 text-xs">
            <button 
              id="shippingCph" 
              class="px-3 py-1 rounded-full border border-gray-400 bg-gray-200"
            >
              Copenhagen
            </button>

            <button 
              id="shippingNonCph" 
              class="px-3 py-1 rounded-full border border-gray-400 bg-transparent"
            >
              Rest of Denmark
            </button>
          </div>

          <p class="mt-1 text-gray-500 text-xs">
            Copenhagen = free shipping. Rest of Denmark = +45 kr.
          </p>
        </div>

        <!-- Cart item container -->
        <div 
          id="cartItems" 
          class="space-y-4 text-sm"
        >
          <!-- Filled by JS -->
        </div>

        <!-- Totals -->
        <div class="border-t border-gray-300 pt-4 mt-4 text-sm">
          <div class="flex justify-between mb-1">
            <span>
              Subtotal:
            </span>

            <span 
              id="cartSubtotal" 
              class="font-bold"
            >
              0 kr.
            </span>
          </div>

          <div class="flex justify-between mb-2 text-xs text-gray-600">
            <span>
              Shipping:
            </span>

            <span id="cartShippingLabel">
              +45 kr.
            </span>
          </div>

          <div class="flex justify-between font-semibold border-t border-gray-300 pt-2 mb-3">
            <span>
              Total:
            </span>

            <span id="cartTotal">
              45 kr.
            </span>
          </div>

          <!-- MobilePay button -->
          <button 
            id="openMobilePay" 
            class="w-full bg-green-500 text-white py-2 rounded mb-2"
          >
            Open MobilePay
          </button>

          <p class="text-xs text-gray-500 mb-2 text-center">
            "Open MobilePay" is only a real link on mobile devices.
          </p>

          <!-- Copy message -->
          <button 
            id="copyMobilePay" 
            class="w-full bg-gray-200 py-2 rounded"
          >
            Copy order message
          </button>
        </div>
      </div>
    </div>

    <!-- Dark overlay behind cart -->
    <div 
      id="cartOverlay" 
      class="fixed inset-0 bg-black/50 hidden z-40"
    ></div>

    <!-- How to order -->
    <section class="py-20 text-center fade-section">
      <h2 class="text-3xl font-bold mb-10">
        How to order
      </h2>

      <div class="grid grid-cols-1 md:grid-cols-5 gap-6 max-w-6xl mx-auto text-sm md:text-base">
        <div class="bg-white/10 rounded-xl p-6 backdrop-blur">
          <h3 class="font-bold text-lg mb-2">
            1. Choose
          </h3>

          <p>
            Select your favourite SEP piece. T-shirt, hoodie or trousers. Then pick your size and quantity.
          </p>
        </div>

        <div class="bg-white/10 rounded-xl p-6 backdrop-blur">
          <h3 class="font-bold text-lg mb-2">
            2. Add to cart
          </h3>

          <p>
            Click "Add" to add your chosen items. When ready, click "View cart" to review your order.
          </p>
        </div>

        <div class="bg-white/10 rounded-xl p-6 backdrop-blur">
          <h3 class="font-bold text-lg mb-2">
            3. Copy order message
          </h3>

          <p>
            Inside your cart, press "Copy order message". Your full order and shipping details are copied automatically.
          </p>
        </div>

        <div class="bg-white/10 rounded-xl p-6 backdrop-blur">
          <h3 class="font-bold text-lg mb-2">
            4. Pay with MobilePay
          </h3>

          <p>
            Send the total amount to <b>5894BZ</b> using MobilePay.
            Shipping is free in Copenhagen, +45 kr for the rest of Denmark.
          </p>
        </div>

        <div class="bg-white/10 rounded-xl p-6 backdrop-blur">
          <h3 class="font-bold text-lg mb-2">
            5. Send your order
          </h3>

          <p>
            DM your copied message to <b>@seproairesis</b> on Instagram or TikTok.
            SEP currently delivers only within Denmark.
          </p>
        </div>
      </div>
    </section>

    <!-- Footer -->
    <footer class="text-center py-10 fade-section text-sm">
      <p>
        © 2025 SEP - Se Proairesis ("Your Choice") • MobilePay 5894BZ • +45 kr shipping (FREE in Copenhagen) • Made in Copenhagen. Delivered only across Denmark.
      </p>

      <p class="mt-2 text-xs text-gray-400">
        No data selling. No ads following you around. No creepy tracking. Just simple, intentional clothing.
      </p>

      <div class="flex justify-center gap-4 mt-4">
        <a 
          href="https://instagram.com/seproairesis" 
          target="_blank" 
          class="bg-gradient-to-br from-pink-500 to-purple-600 text-white px-4 py-2 rounded-full text-sm"
        >
          Instagram
        </a>

        <a 
          href="https://tiktok.com/@seproairesis" 
          target="_blank" 
          class="bg-black text-white px-4 py-2 rounded-full text-sm"
        >
          TikTok
        </a>
      </div>
    </footer>
  </section>
  <!-- END SCENE: SEP SHOP -->
  <!-- 
    ======================
    SCENE: ABOUT SEP
    ======================
  -->
  <section 
    id="scene-sep-about" 
    class="scene"
  >
    <div class="min-h-screen bg-black text-white flex items-center justify-center px-6 py-16">
      <div class="max-w-3xl mx-auto space-y-6 text-sm md:text-base">
        <h2 class="text-3xl font-bold tracking-wide">
          About SEP
        </h2>

        <p class="text-gray-300">
          SEP comes from the ancient Greek phrase 
          <span class="italic">Se Proairesis</span>. It roughly means "Your Choice".
          The brand is built around that idea. You choose how simple, intentional and calm your wardrobe can be.
        </p>

        <p class="text-gray-300">
          The clothes are minimalist on purpose. A white T-shirt, a black hoodie and black trousers that feel good to wear
          and work with almost anything. Everything is hand-pressed in Copenhagen in small batches, at a pace that feels human.
        </p>

        <p class="text-gray-300">
          There are no big collections and no constant drops. No hype and no drama.
          You pick your size and quantity, copy your order message, send it, and that is it.
        </p>

        <p class="text-gray-400 text-xs">
          There are also no tricks behind SEP. No data selling. No tracking across the internet.
          No dark patterns trying to keep you here. Just a simple site that helps you get the pieces you want.
        </p>

        <div class="flex flex-wrap gap-3 text-xs md:text-sm mt-4">
          <button 
            class="px-4 py-2 rounded-full border border-white/20" 
            onclick="showScene('sep-shop')"
          >
            Back to SEP shop
          </button>

          <button 
            class="px-4 py-2 rounded-full border border-white/20" 
            onclick="showScene('mih-welcome')"
          >
            Go to Make it happen
          </button>
        </div>
      </div>
    </div>
  </section>
  <!-- END SCENE: ABOUT SEP -->

  <!-- 
    ======================
    SCENE: MIH WELCOME
    ======================
  -->
  <section 
    id="scene-mih-welcome" 
    class="scene"
  >
    <div class="min-h-screen bg-black text-white pt-16 pb-20 px-4 md:px-6">
      <!-- MIH top bar -->
      <div class="max-w-5xl mx-auto mb-8 flex flex-col md:flex-row md:items-center md:justify-between gap-4">
        <div>
          <div class="text-[10px] tracking-[0.5em] uppercase text-gray-400 mb-1">
            MAKE IT
          </div>

          <div class="text-2xl md:text-3xl font-semibold tracking-[0.5em] uppercase">
            SEP
          </div>

          <div class="text-[10px] tracking-[0.5em] uppercase text-gray-400 mt-1">
            HAPPEN
          </div>
        </div>

        <div class="flex flex-wrap gap-2 text-xs md:text-sm">
          <button 
            class="px-3 py-1 rounded-full border border-white/20 text-gray-300" 
            onclick="showScene('mih-login')"
          >
            Login
          </button>

          <button 
            class="px-3 py-1 rounded-full border border-white/20 text-gray-300" 
            onclick="showScene('mih-welcome')"
          >
            Welcome
          </button>

          <button 
            class="px-3 py-1 rounded-full border border-white/20 text-gray-300" 
            onclick="showScene('mih-leaderboard')"
          >
            Leaderboard
          </button>

          <button 
            class="px-3 py-1 rounded-full border border-white/20 text-gray-300" 
            onclick="showScene('mih-stats')"
          >
            Stats
          </button>

          <button 
            class="px-3 py-1 rounded-full border border-white/20 text-gray-300" 
            onclick="showScene('mih-about')"
          >
            About
          </button>
        </div>

        <div class="flex flex-col items-end gap-2 text-[11px] text-gray-400 min-w-[160px]">
          <button 
            type="button"
            class="px-3 py-1 rounded-full border border-white/25 text-[11px] text-gray-200"
            onclick="showScene('sep-shop')"
          >
            Back to SEP
          </button>
        </div>
      </div>

      <!-- Main welcome card -->
      <main class="max-w-5xl mx-auto">
        <div class="mih-card p-6 md:p-8 space-y-4 text-sm md:text-base">
          <div>
            <h1 class="text-2xl md:text-3xl font-semibold mb-2">
              Move more. Compete. Make it happen.
            </h1>

            <p class="text-gray-300">
              Run, walk or cycle. Log your distance and your minutes. Slowly climb the leaderboard in your own league.
            </p>
          </div>

          <div class="flex flex-wrap gap-3 text-xs md:text-sm">
            <button 
              class="px-5 py-2 rounded-full bg-white text-black"
              onclick="showScene('mih-leaderboard')"
            >
              See leaderboard →
            </button>

            <button 
              class="px-5 py-2 rounded-full border border-white/20 text-gray-200"
              onclick="showScene('mih-about')"
            >
              What is this?
            </button>
          </div>

          <div class="flex flex-wrap gap-2 text-[11px] text-gray-300 mt-2">
            <span class="px-3 py-1 rounded-full border border-white/10 bg-white/5">
              4 leagues: Amateurs, Intermediates, Pros, Legends
            </span>

            <span class="px-3 py-1 rounded-full border border-white/10 bg-white/5">
              New people are placed where leagues are lightest
            </span>

            <span class="px-3 py-1 rounded-full border border-white/10 bg-white/5">
              Ranking rewards distance, commitment and improvement
            </span>
          </div>
        </div>
      </main>
    </div>
  </section>
  <!-- END SCENE: MIH WELCOME -->

  <!-- 
    ======================
    SCENE: MIH LOGIN
    ======================
  -->
  <section 
    id="scene-mih-login" 
    class="scene"
  >
    <div class="min-h-screen bg-black text-white pt-16 pb-20 px-4 md:px-6">
      <!-- MIH top bar (same layout as welcome) -->
      <div class="max-w-5xl mx-auto mb-8 flex flex-col md:flex-row md:items-center md:justify-between gap-4">
        <div>
          <div class="text-[10px] tracking-[0.5em] uppercase text-gray-400 mb-1">
            MAKE IT
          </div>

          <div class="text-2xl md:text-3xl font-semibold tracking-[0.5em] uppercase">
            SEP
          </div>

          <div class="text-[10px] tracking-[0.5em] uppercase text-gray-400 mt-1">
            HAPPEN
          </div>
        </div>

        <div class="flex flex-wrap gap-2 text-xs md:text-sm">
          <button 
            class="px-3 py-1 rounded-full border border-white/20 text-gray-300" 
            onclick="showScene('mih-login')"
          >
            Login
          </button>

          <button 
            class="px-3 py-1 rounded-full border border-white/20 text-gray-300" 
            onclick="showScene('mih-welcome')"
          >
            Welcome
          </button>

          <button 
            class="px-3 py-1 rounded-full border border-white/20 text-gray-300" 
            onclick="showScene('mih-leaderboard')"
          >
            Leaderboard
          </button>

          <button 
            class="px-3 py-1 rounded-full border border-white/20 text-gray-300" 
            onclick="showScene('mih-stats')"
          >
            Stats
          </button>

          <button 
            class="px-3 py-1 rounded-full border border-white/20 text-gray-300" 
            onclick="showScene('mih-about')"
          >
            About
          </button>
        </div>

        <div class="flex flex-col items-end gap-2 text-[11px] text-gray-400 min-w-[160px]">
          <button 
            type="button"
            class="px-3 py-1 rounded-full border border-white/25 text-[11px] text-gray-200"
            onclick="showScene('sep-shop')"
          >
            Back to SEP
          </button>
        </div>
      </div>

      <!-- Login card -->
      <main class="max-w-5xl mx-auto">
        <div class="mih-card p-6 md:p-8 text-sm md:text-base">
          <h1 class="text-2xl md:text-3xl font-semibold mb-2">
            Log in to Make it happen
          </h1>

          <p class="text-gray-300 mb-4">
            Create a simple account so the site knows who you are and only you can manage your activities.
          </p>

          <form 
            id="login-form" 
            class="space-y-3 mt-2"
          >
            <div>
              <label 
                for="login-name" 
                class="block text-xs text-gray-400 mb-1"
              >
                Name
              </label>

              <input 
                id="login-name" 
                type="text" 
                placeholder="e.g. Daniel"
                class="w-full px-3 py-2 rounded-full bg-black/40 border border-white/15 text-sm" 
                required
              />
            </div>

            <div>
              <label 
                for="login-password" 
                class="block text-xs text-gray-400 mb-1"
              >
                Password
              </label>

              <input 
                id="login-password" 
                type="password" 
                placeholder="Choose something simple"
                class="w-full px-3 py-2 rounded-full bg-black/40 border border-white/15 text-sm" 
                required
              />
            </div>

            <button 
              type="submit" 
              class="px-5 py-2 rounded-full bg-white text-black text-xs md:text-sm mt-1"
            >
              Log in / Create account
            </button>

            <p class="text-[11px] text-gray-400 mt-2">
              If this is your first time with this name, we will create a new account and place you into a league.
            </p>
          </form>

          <p class="text-[11px] text-gray-500 mt-4">
            Your login is saved on this browser. Accounts logged out for more than 30 days are deleted, together with their activities.
          </p>
        </div>
      </main>
    </div>
  </section>
  <!-- END SCENE: MIH LOGIN -->
  <!-- 
    ==========================
    SCENE: MIH LEADERBOARD
    ==========================
  -->
  <section 
    id="scene-mih-leaderboard" 
    class="scene"
  >
    <div class="min-h-screen bg-black text-white pt-16 pb-20 px-4 md:px-6">
      <!-- MIH top bar -->
      <div class="max-w-5xl mx-auto mb-8 flex flex-col md:flex-row md:items-center md:justify-between gap-4">
        <div>
          <div class="text-[10px] tracking-[0.5em] uppercase text-gray-400 mb-1">
            MAKE IT
          </div>

          <div class="text-2xl md:text-3xl font-semibold tracking-[0.5em] uppercase">
            SEP
          </div>

          <div class="text-[10px] tracking-[0.5em] uppercase text-gray-400 mt-1">
            HAPPEN
          </div>
        </div>

        <div class="flex flex-wrap gap-2 text-xs md:text-sm">
          <button 
            class="px-3 py-1 rounded-full border border-white/20 text-gray-300" 
            onclick="showScene('mih-login')"
          >
            Login
          </button>

          <button 
            class="px-3 py-1 rounded-full border border-white/20 text-gray-300" 
            onclick="showScene('mih-welcome')"
          >
            Welcome
          </button>

          <button 
            class="px-3 py-1 rounded-full border border-white/20 text-gray-300" 
            onclick="showScene('mih-leaderboard')"
          >
            Leaderboard
          </button>

          <button 
            class="px-3 py-1 rounded-full border border-white/20 text-gray-300" 
            onclick="showScene('mih-stats')"
          >
            Stats
          </button>

          <button 
            class="px-3 py-1 rounded-full border border-white/20 text-gray-300" 
            onclick="showScene('mih-about')"
          >
            About
          </button>
        </div>

        <div class="flex flex-col items-end gap-2 text-[11px] text-gray-400 min-w-[160px]">
          <div 
            id="user-controls" 
            class="flex flex-wrap gap-2 justify-end"
          >
            <!-- Filled by JS with "Logged in as..." or "Not logged in" -->
          </div>

          <button 
            type="button"
            class="px-3 py-1 rounded-full border border-white/25 text-[11px] text-gray-200"
            onclick="showScene('sep-shop')"
          >
            Back to SEP
          </button>
        </div>
      </div>

      <!-- Main content: form + leaderboard + my activities -->
      <main class="max-w-5xl mx-auto space-y-6 text-sm md:text-base">
        <!-- Add activity + ranking explanation -->
        <div class="mih-card p-6 md:p-8">
          <div class="grid md:grid-cols-2 gap-6">
            <!-- Add activity form -->
            <div>
              <h2 class="text-xl font-semibold mb-2">
                Add your latest activity
              </h2>

              <p class="text-sm text-gray-300 mb-3">
                Log any run, walk or ride. Use kilometres and minutes so the leaderboard stays fair for everyone.
              </p>

              <form 
                id="entry-form" 
                class="space-y-3"
              >
                <div>
                  <label 
                    for="name" 
                    class="block text-xs text-gray-400 mb-1"
                  >
                    Your name
                  </label>

                  <input 
                    id="name" 
                    type="text" 
                    disabled 
                    placeholder="Log in to set your name"
                    class="w-full px-3 py-2 rounded-full bg-black/40 border border-white/15 text-sm" 
                  />

                  <p class="text-[11px] text-gray-500 mt-1">
                    Name comes from your account. You cannot change it here.
                  </p>
                </div>

                <div class="grid grid-cols-1 sm:grid-cols-2 gap-3">
                  <div>
                    <label 
                      for="distance" 
                      class="block text-xs text-gray-400 mb-1"
                    >
                      Distance (km)
                    </label>

                    <input 
                      id="distance" 
                      type="number" 
                      step="0.1" 
                      min="0" 
                      placeholder="e.g. 5"
                      class="w-full px-3 py-2 rounded-full bg-black/40 border border-white/15 text-sm" 
                      required
                    />
                  </div>

                  <div>
                    <label 
                      for="time" 
                      class="block text-xs text-gray-400 mb-1"
                    >
                      Time (minutes)
                    </label>

                    <input 
                      id="time" 
                      type="number" 
                      step="0.1" 
                      min="0" 
                      placeholder="e.g. 28"
                      class="w-full px-3 py-2 rounded-full bg-black/40 border border-white/15 text-sm" 
                      required
                    />
                  </div>
                </div>

                <button 
                  type="submit" 
                  class="px-5 py-2 rounded-full bg-white text-black text-xs md:text-sm"
                >
                  Save my activity
                </button>

                <p class="text-[11px] text-gray-400 mt-2">
                  Leagues have unlimited spaces. New accounts are spread so the numbers stay balanced.
                </p>
              </form>
            </div>

            <!-- Ranking explanation -->
            <div>
              <h3 class="text-lg font-semibold mb-2">
                How ranking works
              </h3>

              <p class="text-sm text-gray-300">
                The leaderboard gives credit for:
              </p>

              <ul class="text-sm text-gray-300 list-disc list-inside mt-2 space-y-1">
                <li>
                  <strong>Total distance</strong> - the more you move, the higher you go.
                </li>

                <li>
                  <strong>Commitment over time</strong> - more sessions and more weeks logged helps a lot.
                </li>

                <li>
                  <strong>Speed and improvement</strong> - faster pace helps, but it is not the only thing that counts.
                </li>
              </ul>

              <p class="text-xs text-gray-400 mt-3">
                This way someone who is older, heavier or slower but shows up again and again can still climb the table.
              </p>
            </div>
          </div>
        </div>

        <!-- Live leaderboard -->
        <div class="mih-card p-6 md:p-8">
          <div class="flex flex-wrap items-center justify-between gap-3 mb-3">
            <h2 class="text-xl font-semibold">
              Live leaderboard
            </h2>

            <div class="flex items-center gap-2 text-xs text-gray-300">
              <span>
                League:
              </span>

              <select 
                id="league-filter"
                class="px-3 py-1 rounded-full bg-black/40 border border-white/20 text-xs"
                onchange="renderLeaderboard()"
              >
                <option value="all">
                  All leagues
                </option>

                <option value="amateurs">
                  Amateurs
                </option>

                <option value="intermediates">
                  Intermediates
                </option>

                <option value="pros">
                  Pros
                </option>

                <option value="legends">
                  Legends
                </option>
              </select>
            </div>
          </div>

          <div class="overflow-x-auto text-xs md:text-sm">
            <table class="w-full border-collapse min-w-full">
              <thead class="text-gray-400 text-[11px] uppercase tracking-wide border-b border-white/10">
                <tr>
                  <th class="py-2 pr-2 text-left">
                    #
                  </th>

                  <th class="py-2 px-2 text-left">
                    Participant
                  </th>

                  <th class="py-2 px-2 text-left">
                    League
                  </th>

                  <th class="py-2 px-2 text-left">
                    Total distance
                  </th>

                  <th class="py-2 px-2 text-left">
                    Total time
                  </th>
                </tr>
              </thead>

              <tbody id="leaderboard-body">
                <!-- Filled by JS -->
              </tbody>
            </table>
          </div>

          <div 
            id="no-entries" 
            class="text-xs text-gray-400 mt-3"
          >
            No activities yet. Be the first to log a run and grab the number one spot.
          </div>
        </div>

        <!-- Healthy / Free / Fun + privacy note -->
        <div class="mih-card p-6 md:p-8">
          <h3 class="text-lg font-semibold mb-3">
            Healthy. Free. Fun.
          </h3>

          <div class="grid md:grid-cols-3 gap-4 text-sm">
            <div>
              <h4 class="font-semibold mb-1">
                Healthy
              </h4>

              <p class="text-gray-300">
                Even short walks and slow runs help your heart, sleep and energy. Small efforts add up.
              </p>
            </div>

            <div>
              <h4 class="font-semibold mb-1">
                Free
              </h4>

              <p class="text-gray-300">
                No paid tiers. No premium version. No "unlock more stats" button. Just a simple challenge.
              </p>
            </div>

            <div>
              <h4 class="font-semibold mb-1">
                Fun
              </h4>

              <p class="text-gray-300">
                Friendly leagues, gentle competition and visible progress instead of pressure.
              </p>
            </div>
          </div>

          <p class="text-xs text-gray-400 mt-4">
            Your data stays inside this browser in localStorage. There is no data selling, no ads and no tracking pixels.
          </p>
        </div>

        <!-- My activities -->
        <div class="mih-card p-6 md:p-8">
          <h3 class="text-lg font-semibold mb-2">
            My activities
          </h3>

          <p class="text-xs text-gray-400 mb-3">
            Only entries from the account you are logged in with appear here. You can delete them if you make a mistake.
          </p>

          <div class="overflow-x-auto text-xs md:text-sm">
            <table class="w-full border-collapse min-w-full">
              <thead class="text-gray-400 text-[11px] uppercase tracking-wide border-b border-white/10">
                <tr>
                  <th class="py-2 px-2 text-left">
                    Date
                  </th>

                  <th class="py-2 px-2 text-left">
                    Distance
                  </th>

                  <th class="py-2 px-2 text-left">
                    Time
                  </th>

                  <th class="py-2 px-2 text-left">
                    <!-- delete column -->
                  </th>
                </tr>
              </thead>

              <tbody id="my-activities-body">
                <!-- Filled by JS -->
              </tbody>
            </table>
          </div>

          <div 
            id="no-my-activities" 
            class="text-xs text-gray-400 mt-3"
          >
            No activities yet for this account.
          </div>
        </div>
      </main>
    </div>
  </section>
  <!-- END SCENE: MIH LEADERBOARD -->

  <!-- 
    ======================
    SCENE: MIH STATS
    ======================
  -->
  <section 
    id="scene-mih-stats" 
    class="scene"
  >
    <div class="min-h-screen bg-black text-white pt-16 pb-20 px-4 md:px-6">
      <!-- MIH top bar -->
      <div class="max-w-5xl mx-auto mb-8 flex flex-col md:flex-row md:items-center md:justify-between gap-4">
        <div>
          <div class="text-[10px] tracking-[0.5em] uppercase text-gray-400 mb-1">
            MAKE IT
          </div>

          <div class="text-2xl md:text-3xl font-semibold tracking-[0.5em] uppercase">
            SEP
          </div>

          <div class="text-[10px] tracking-[0.5em] uppercase text-gray-400 mt-1">
            HAPPEN
          </div>
        </div>

        <div class="flex flex-wrap gap-2 text-xs md:text-sm">
          <button 
            class="px-3 py-1 rounded-full border border-white/20 text-gray-300" 
            onclick="showScene('mih-login')"
          >
            Login
          </button>

          <button 
            class="px-3 py-1 rounded-full border border-white/20 text-gray-300" 
            onclick="showScene('mih-welcome')"
          >
            Welcome
          </button>

          <button 
            class="px-3 py-1 rounded-full border border-white/20 text-gray-300" 
            onclick="showScene('mih-leaderboard')"
          >
            Leaderboard
          </button>

          <button 
            class="px-3 py-1 rounded-full border border-white/20 text-gray-300" 
            onclick="showScene('mih-stats')"
          >
            Stats
          </button>

          <button 
            class="px-3 py-1 rounded-full border border-white/20 text-gray-300" 
            onclick="showScene('mih-about')"
          >
            About
          </button>
        </div>

        <div class="flex flex-col items-end gap-2 text-[11px] text-gray-400 min-w-[160px]">
          <button 
            type="button"
            class="px-3 py-1 rounded-full border border-white/25 text-[11px] text-gray-200"
            onclick="showScene('sep-shop')"
          >
            Back to SEP
          </button>
        </div>
      </div>

      <!-- Stats table -->
      <main class="max-w-5xl mx-auto">
        <div class="mih-card p-6 md:p-8">
          <div class="flex justify-between items-center mb-3">
            <h2 class="text-xl font-semibold">
              Player stats
            </h2>
          </div>

          <p class="text-sm text-gray-300 mb-3">
            Every activity builds your personal stats. Improvement is based on both distance and time. 
            If you run the same distance faster next time, that also counts as progress.
          </p>

          <div class="overflow-x-auto text-xs md:text-sm">
            <table class="w-full border-collapse min-w-full">
              <thead class="text-gray-400 text-[11px] uppercase tracking-wide border-b border-white/10">
                <tr>
                  <th class="py-2 px-2 text-left">
                    Participant
                  </th>

                  <th class="py-2 px-2 text-left">
                    League
                  </th>

                  <th class="py-2 px-2 text-left">
                    Runs
                  </th>

                  <th class="py-2 px-2 text-left">
                    Total distance
                  </th>

                  <th class="py-2 px-2 text-left">
                    Total time
                  </th>

                  <th class="py-2 px-2 text-left">
                    Avg distance
                  </th>

                  <th class="py-2 px-2 text-left">
                    Best distance
                  </th>

                  <th class="py-2 px-2 text-left">
                    Improvement
                  </th>
                </tr>
              </thead>

              <tbody id="stats-body">
                <!-- Filled by JS -->
              </tbody>
            </table>
          </div>

          <div 
            id="no-stats" 
            class="text-xs text-gray-400 mt-3"
          >
            Stats will appear as soon as people start logging their activities.
          </div>
        </div>
      </main>
    </div>
  </section>
  <!-- END SCENE: MIH STATS -->

  <!-- 
    ======================
    SCENE: MIH PROFILE
    ======================
  -->
  <section 
    id="scene-mih-profile" 
    class="scene"
  >
    <div class="min-h-screen bg-black text-white pt-16 pb-20 px-4 md:px-6">
      <div class="max-w-3xl mx-auto space-y-6">
        <div class="flex items-center justify-between">
          <div>
            <h2 
              class="text-2xl font-semibold" 
              id="profileName"
            >
              Runner profile
            </h2>

            <p 
              class="text-xs text-gray-400" 
              id="profileLeague"
            >
              <!-- League label -->
            </p>
          </div>

          <button 
            class="px-3 py-1 rounded-full border border-white/25 text-[11px]"
            onclick="showScene('mih-leaderboard')"
          >
            Back to leaderboard
          </button>
        </div>

        <div class="mih-card p-6 space-y-4 text-sm">
          <div class="grid grid-cols-2 gap-4">
            <div>
              <div class="profile-label">
                Total distance
              </div>

              <div 
                class="profile-value" 
                id="profileTotalDistance"
              >
                –
              </div>
            </div>

            <div>
              <div class="profile-label">
                Total time
              </div>

              <div 
                class="profile-value" 
                id="profileTotalTime"
              >
                –
              </div>
            </div>

            <div>
              <div class="profile-label">
                Runs logged
              </div>

              <div 
                class="profile-value" 
                id="profileRuns"
              >
                –
              </div>
            </div>

            <div>
              <div class="profile-label">
                Average distance
              </div>

              <div 
                class="profile-value" 
                id="profileAvgDistance"
              >
                –
              </div>
            </div>
          </div>

          <hr class="border-white/10 my-4" />

          <h3 class="text-lg font-semibold mb-1">
            Estimated best times
          </h3>

          <p class="text-xs text-gray-400 mb-3">
            Based on the pace from your logged runs.
          </p>

          <div class="grid grid-cols-3 gap-4 text-sm">
            <div>
              <div class="profile-label">
                5 km
              </div>

              <div 
                class="profile-value" 
                id="profileBest5k"
              >
                –
              </div>
            </div>

            <div>
              <div class="profile-label">
                10 km
              </div>

              <div 
                class="profile-value" 
                id="profileBest10k"
              >
                –
              </div>
            </div>

            <div>
              <div class="profile-label">
                100 m
              </div>

              <div 
                class="profile-value" 
                id="profileBest100m"
              >
                –
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>
  <!-- END SCENE: MIH PROFILE -->

  <!-- 
    ======================
    SCENE: MIH ABOUT
    ======================
  -->
  <section 
    id="scene-mih-about" 
    class="scene"
  >
    <div class="min-h-screen bg-black text-white pt-16 pb-20 px-4 md:px-6">
      <!-- MIH top bar -->
      <div class="max-w-5xl mx-auto mb-8 flex flex-col md:flex-row md:items-center md:justify-between gap-4">
        <div>
          <div class="text-[10px] tracking-[0.5em] uppercase text-gray-400 mb-1">
            MAKE IT
          </div>

          <div class="text-2xl md:text-3xl font-semibold tracking-[0.5em] uppercase">
            SEP
          </div>

          <div class="text-[10px] tracking-[0.5em] uppercase text-gray-400 mt-1">
            HAPPEN
          </div>
        </div>

        <div class="flex flex-wrap gap-2 text-xs md:text-sm">
          <button 
            class="px-3 py-1 rounded-full border border-white/20 text-gray-300" 
            onclick="showScene('mih-login')"
          >
            Login
          </button>

          <button 
            class="px-3 py-1 rounded-full border border-white/20 text-gray-300" 
            onclick="showScene('mih-welcome')"
          >
            Welcome
          </button>

          <button 
            class="px-3 py-1 rounded-full border border-white/20 text-gray-300" 
            onclick="showScene('mih-leaderboard')"
          >
            Leaderboard
          </button>

          <button 
            class="px-3 py-1 rounded-full border border-white/20 text-gray-300" 
            onclick="showScene('mih-stats')"
          >
            Stats
          </button>

          <button 
            class="px-3 py-1 rounded-full border border-white/20 text-gray-300" 
            onclick="showScene('mih-about')"
          >
            About
          </button>
        </div>

        <div class="flex flex-col items-end gap-2 text-[11px] text-gray-400 min-w-[160px]">
          <button 
            type="button"
            class="px-3 py-1 rounded-full border border-white/25 text-[11px] text-gray-200"
            onclick="showScene('sep-shop')"
          >
            Back to SEP
          </button>
        </div>
      </div>

      <!-- About content -->
      <main class="max-w-5xl mx-auto">
        <div class="mih-card p-6 md:p-8 space-y-4 text-sm md:text-base text-gray-200">
          <h2 class="text-xl font-semibold mb-2">
            About Make it happen
          </h2>

          <p>
            Make it happen is a simple health challenge for anyone who wants to move a bit more, 
            without paying for apps, subscriptions or fancy gear. 
            You log what you do and see where you land in your league.
          </p>

          <p>
            It is not about being the fastest in the world. 
            It is about small sessions adding up over weeks and months. 
            Older runners, heavier runners, busy parents and complete beginners can all take part and see progress.
          </p>

          <p class="font-semibold">
            It is built to be:
          </p>

          <ul class="list-disc list-inside space-y-1">
            <li>
              <strong>Healthy</strong> - even short walks and slow runs help your heart, sleep and energy.
            </li>

            <li>
              <strong>Free</strong> - no paid tiers, no premium version, no "unlock more stats" button.
            </li>

            <li>
              <strong>Fun</strong> - friendly leagues, gentle competition and visible progress instead of pressure.
            </li>
          </ul>

          <p class="text-sm text-gray-300">
            Behind the scenes, it is intentionally boring in a good way. 
            Your data stays in your browser storage. 
            There is no data selling, no ad network and no dark patterns trying to keep you here for hours.
          </p>

          <div class="flex flex-wrap gap-3 text-xs md:text-sm mt-2">
            <button 
              class="px-4 py-2 rounded-full border border-white/20" 
              onclick="showScene('mih-leaderboard')"
            >
              Go to leaderboard
            </button>

            <button 
              class="px-4 py-2 rounded-full border border-white/20" 
              onclick="showScene('sep-shop')"
            >
              Back to SEP
            </button>
          </div>
        </div>
      </main>
    </div>
  </section>
  <!-- END SCENE: MIH ABOUT -->
  <!-- 
    ============================
    JAVASCRIPT STARTS HERE
    ============================
  -->
  <script>
  // ============================================
  // TRANSLATION SYSTEM - SEP ONLY
  // ============================================

  const translations = {
    en: {
      nav_shop: "SEP shop",
      nav_about_sep: "About SEP",
      nav_mih: "Make it happen",
      nav_about_mih: "About Make it happen",
      nav_language: "Language",

      hero_title: "Minimalist clothing made with intention",
      hero_subtitle: "Soft, clean and hand pressed in Copenhagen",

      shop_now: "Shop now",
      view_cart: "View cart",

      cart_title: "Your cart",
      cart_shipping_cph: "Copenhagen (free)",
      cart_shipping_rest: "Rest of Denmark +45 kr",
      cart_subtotal: "Subtotal",
      cart_shipping: "Shipping",
      cart_total: "Total",
      open_mobilepay: "Open MobilePay",
      copy_order: "Copy order message",

      added_to_cart: "Added to cart",
      copied: "Order message copied",

      hto_title: "How to order",
      hto_step1: "Choose product and size",
      hto_step2: "Add to cart",
      hto_step3: "Copy order message",
      hto_step4: "Pay with MobilePay",
      hto_step5: "Send order via DM",

      footer_title: "SEP - Se Proairesis",
      footer_shipping: "45 kr shipping. Free in Copenhagen.",
      footer_denmark: "Delivery only in Denmark.",
      footer_privacy: "No tracking. No data selling. No dark patterns."
    },
    da: {
      nav_shop: "SEP butik",
      nav_about_sep: "Om SEP",
      nav_mih: "Make it happen",
      nav_about_mih: "Om Make it happen",
      nav_language: "Sprog",

      hero_title: "Minimalistisk tøj lavet med omtanke",
      hero_subtitle: "Blødt, rent og håndpresset i København",

      shop_now: "Køb nu",
      view_cart: "Se kurv",

      cart_title: "Din kurv",
      cart_shipping_cph: "København (gratis)",
      cart_shipping_rest: "Resten af Danmark +45 kr",
      cart_subtotal: "Subtotal",
      cart_shipping: "Fragt",
      cart_total: "Total",
      open_mobilepay: "Åbn MobilePay",
      copy_order: "Kopiér ordrebesked",

      added_to_cart: "Tilføjet til kurv",
      copied: "Ordrebesked kopieret",

      hto_title: "Sådan bestiller du",
      hto_step1: "Vælg produkt og størrelse",
      hto_step2: "Læg i kurv",
      hto_step3: "Kopiér ordrebesked",
      hto_step4: "Betal med MobilePay",
      hto_step5: "Send ordren via DM",

      footer_title: "SEP - Se Proairesis",
      footer_shipping: "45 kr fragt. Gratis i København.",
      footer_denmark: "Levering kun i Danmark.",
      footer_privacy: "Ingen tracking. Ingen datasalg. Ingen dark patterns."
    },
    cs: {
      nav_shop: "SEP obchod",
      nav_about_sep: "O SEP",
      nav_mih: "Make it happen",
      nav_about_mih: "O Make it happen",
      nav_language: "Jazyk",

      hero_title: "Minimalistické oblečení vyrobené s úmyslem",
      hero_subtitle: "Měkké, čisté a ručně lisované v Kodani",

      shop_now: "Nakoupit",
      view_cart: "Zobrazit košík",

      cart_title: "Váš košík",
      cart_shipping_cph: "Kodaň (zdarma)",
      cart_shipping_rest: "Zbytek Dánska +45 kr",
      cart_subtotal: "Mezisoučet",
      cart_shipping: "Doprava",
      cart_total: "Celkem",
      open_mobilepay: "Otevřít MobilePay",
      copy_order: "Kopírovat objednávku",

      added_to_cart: "Přidáno do košíku",
      copied: "Objednávka zkopírována",

      hto_title: "Jak objednat",
      hto_step1: "Vyberte produkt a velikost",
      hto_step2: "Přidejte do košíku",
      hto_step3: "Zkopírujte objednávku",
      hto_step4: "Zaplaťte MobilePay",
      hto_step5: "Pošlete objednávku přes DM",

      footer_title: "SEP - Se Proairesis",
      footer_shipping: "45 kr doprava. Zdarma v Kodani.",
      footer_denmark: "Doručení pouze v Dánsku.",
      footer_privacy: "Žádné sledování. Žádný prodej dat. Žádné dark patterns."
    }
  };

  let currentLang = "en";

  function t(key) {
    return translations[currentLang][key] || translations.en[key] || key;
  }

  function applyTranslations() {
    document.querySelectorAll("[data-i18n]").forEach(el => {
      const key = el.getAttribute("data-i18n");
      el.innerHTML = t(key);
    });
  }

  function updateLanguageButtons() {
    document.querySelectorAll(".lang-btn").forEach(btn => {
      if (btn.dataset.lang === currentLang) {
        btn.classList.add("bg-white", "text-black");
      } else {
        btn.classList.remove("bg-white", "text-black");
      }
    });
  }

  function detectLanguage() {
    const saved = localStorage.getItem("sep_lang");
    if (saved && translations[saved]) return saved;
    const browser = navigator.language.slice(0, 2);
    if (browser === "da") return "da";
    if (browser === "cs") return "cs";
    return "en";
  }

  function setLanguage(lang) {
    currentLang = lang;
    localStorage.setItem("sep_lang", lang);
    applyTranslations();
    updateLanguageButtons();
  }

  // ============================================
  // SCENE SWITCHING
  // ============================================

  function showScene(name) {
    document.querySelectorAll(".scene").forEach(sec => {
      sec.classList.remove("active");
    });
    const target = document.getElementById("scene-" + name);
    if (target) target.classList.add("active");
    window.scrollTo({ top: 0, left: 0, behavior: "instant" });
  }

  // ============================================
  // GLOBAL NAV (HAMBURGER)
  // ============================================

  function initGlobalNav() {
    const navToggle = document.getElementById("mainNavToggle");
    const navMenu = document.getElementById("navMenu");

    if (!navToggle || !navMenu) return;

    navToggle.addEventListener("click", () => {
      navMenu.classList.toggle("hidden");
    });

    // Language buttons
    document.querySelectorAll(".lang-btn").forEach(btn => {
      btn.addEventListener("click", () => {
        const lang = btn.dataset.lang;
        if (lang) setLanguage(lang);
      });
    });
  }

  // ============================================
  // SEP CART SYSTEM
  // ============================================

  let cart = JSON.parse(localStorage.getItem("sep_cart") || "[]");
  let shippingType = "cph"; // cph = free, rest = +45
  const SHIPPING_COST_REST = 45;

  function saveCart() {
    localStorage.setItem("sep_cart", JSON.stringify(cart));
  }

  function getCartCounts() {
    const totalItems = cart.reduce((sum, item) => sum + item.qty, 0);
    const subtotal = cart.reduce((sum, item) => sum + item.price * item.qty, 0);
    const shipping = shippingType === "cph" ? 0 : SHIPPING_COST_REST;
    const total = subtotal + shipping;
    return { totalItems, subtotal, shipping, total };
  }

  function updateCartBadge() {
    const badge = document.getElementById("cartCounter");
    if (!badge) return;
    const { totalItems } = getCartCounts();
    if (totalItems > 0) {
      badge.classList.remove("hidden");
      badge.textContent = totalItems;
    } else {
      badge.classList.add("hidden");
    }
  }

  function renderCart() {
    const itemsContainer = document.getElementById("cartItems");
    const subtotalEl = document.getElementById("cartSubtotal");
    const shippingLabelEl = document.getElementById("cartShippingLabel");
    const totalEl = document.getElementById("cartTotal");

    if (!itemsContainer || !subtotalEl || !shippingLabelEl || !totalEl) return;

    itemsContainer.innerHTML = "";

    if (cart.length === 0) {
      const empty = document.createElement("p");
      empty.className = "text-sm text-gray-500 py-8 text-center";
      empty.textContent = "Your cart is empty.";
      itemsContainer.appendChild(empty);
    } else {
      cart.forEach((item, index) => {
        const row = document.createElement("div");
        row.className = "border-b border-gray-200 pb-2 mb-2 text-sm";

        row.innerHTML = `
          <div class="flex justify-between">
            <span class="font-medium">${item.name}</span>
            <span>${item.price * item.qty} kr.</span>
          </div>
          <div class="text-xs text-gray-500">
            Size: ${item.size} · Qty: ${item.qty}
          </div>
          <button class="mt-1 text-xs text-red-500 underline remove-item-btn" data-index="${index}">
            Remove
          </button>
        `;

        itemsContainer.appendChild(row);
      });
    }

    const { subtotal, shipping, total } = getCartCounts();

    subtotalEl.textContent = `${subtotal} kr.`;
    if (shippingType === "cph") {
      shippingLabelEl.textContent = "0 kr. (FREE in Copenhagen)";
    } else {
      shippingLabelEl.textContent = `+${shipping} kr.`;
    }
    totalEl.textContent = `${total} kr.`;

    updateCartBadge();

    // Wire remove buttons
    itemsContainer.querySelectorAll(".remove-item-btn").forEach(btn => {
      btn.addEventListener("click", () => {
        const idx = parseInt(btn.dataset.index, 10);
        if (!isNaN(idx)) {
          cart.splice(idx, 1);
          saveCart();
          renderCart();
        }
      });
    });
  }

  function addToCartFromCard(card) {
    const name = card.querySelector("h3")?.textContent.trim();
    const priceText = card.querySelector(".product-price")?.textContent || "180";
    const size = card.querySelector(".size-select")?.value || "M";
    const qtyInput = card.querySelector(".qty-input");
    const qty = qtyInput ? parseInt(qtyInput.value, 10) || 1 : 1;

    const price = parseInt(priceText.replace(/\D/g, ""), 10) || 180;

    const existing = cart.find(
      item => item.name === name && item.size === size
    );

    if (existing) {
      existing.qty += qty;
    } else {
      cart.push({ name, price, size, qty });
    }

    saveCart();
    renderCart();
    showGreenPopup(t("added_to_cart"));
  }

  function showGreenPopup(text) {
    const existing = document.querySelector(".popup");
    if (existing) existing.remove();

    const popup = document.createElement("div");
    popup.className = "popup";
    popup.textContent = text;
    document.body.appendChild(popup);

    requestAnimationFrame(() => {
      popup.classList.add("show");
    });

    setTimeout(() => {
      popup.classList.remove("show");
      setTimeout(() => popup.remove(), 300);
    }, 2000);
  }

  function openCartSidebar() {
    const sidebar = document.getElementById("cartSidebar");
    const overlay = document.getElementById("cartOverlay");
    if (!sidebar || !overlay) return;
    sidebar.classList.remove("translate-x-full");
    overlay.classList.remove("hidden");
    document.getElementById("globalNavButtons")?.classList.add("opacity-40");
    document.getElementById("sepHeroButtons")?.classList.add("opacity-40");
  }

  function closeCartSidebar() {
    const sidebar = document.getElementById("cartSidebar");
    const overlay = document.getElementById("cartOverlay");
    if (!sidebar || !overlay) return;
    sidebar.classList.add("translate-x-full");
    overlay.classList.add("hidden");
    document.getElementById("globalNavButtons")?.classList.remove("opacity-40");
    document.getElementById("sepHeroButtons")?.classList.remove("opacity-40");
  }

  function setShipping(type) {
    shippingType = type;
    renderCart();
  }

  function initCart() {
    // View cart
    document.getElementById("viewCartBtn")?.addEventListener("click", openCartSidebar);
    document.getElementById("cartOverlay")?.addEventListener("click", closeCartSidebar);
    document.getElementById("closeCart")?.addEventListener("click", closeCartSidebar);

    // Shipping buttons
    document.getElementById("shippingCph")?.addEventListener("click", () => setShipping("cph"));
    document.getElementById("shippingNonCph")?.addEventListener("click", () => setShipping("rest"));

    // Add to cart buttons
    document.querySelectorAll(".product-card .add-to-cart").forEach(btn => {
      btn.addEventListener("click", () => {
        const card = btn.closest(".product-card");
        if (card) addToCartFromCard(card);
      });
    });

    // Initial render
    renderCart();
  }

  // ============================================
  // MOBILEPAY + ORDER MESSAGE
  // ============================================

  const MOBILEPAY_NUMBER = "5894BZ";

  function openMobilePay() {
    window.location.href = "mobilepay://transfer?phone=" + MOBILEPAY_NUMBER.replace(/\D/g, "");
    alert("Thanks for supporting SEP.");
  }

  function copyOrderMessage() {
    const { subtotal, shipping, total } = getCartCounts();
    const shippingLabel = shippingType === "cph"
      ? "0 kr. (FREE in Copenhagen)"
      : `+${shipping} kr.`;

    let lines = [];
    lines.push("Hi SEP, here is my order:");
    lines.push("");
    cart.forEach(item => {
      lines.push(`${item.qty} × ${item.name} (Size: ${item.size})`);
    });
    lines.push("");
    lines.push(`Subtotal: ${subtotal} kr.`);
    lines.push(`Shipping: ${shippingLabel}`);
    lines.push(`Total: ${total} kr.`);
    lines.push("");
    lines.push("Paid with MobilePay: " + MOBILEPAY_NUMBER);

    const text = lines.join("\n");

    navigator.clipboard.writeText(text).then(() => {
      showGreenPopup(t("copied"));
    }).catch(() => {
      alert("Could not copy. Please copy manually.");
    });
  }

  function initMobilePayButtons() {
    document.getElementById("openMobilePay")?.addEventListener("click", openMobilePay);
    document.getElementById("copyMobilePay")?.addEventListener("click", copyOrderMessage);
  }

  // ============================================
  // MIH DATA MODEL
  // ============================================

  const STORAGE_USERS = "mih_users_v1";
  const STORAGE_ENTRIES = "mih_entries_v1";
  const STORAGE_CURRENT_USER = "mih_current_user_v1";

  let mihUsers = JSON.parse(localStorage.getItem(STORAGE_USERS) || "[]");
  let mihEntries = JSON.parse(localStorage.getItem(STORAGE_ENTRIES) || "[]");
  let mihCurrentUserId = JSON.parse(localStorage.getItem(STORAGE_CURRENT_USER) || "null");

  const MIH_LEAGUES = ["amateurs", "intermediates", "pros", "legends"];

  function saveMihUsers() {
    localStorage.setItem(STORAGE_USERS, JSON.stringify(mihUsers));
  }

  function saveMihEntries() {
    localStorage.setItem(STORAGE_ENTRIES, JSON.stringify(mihEntries));
  }

  function saveMihCurrentUser() {
    localStorage.setItem(STORAGE_CURRENT_USER, JSON.stringify(mihCurrentUserId));
  }

  function findMihUserByName(name) {
    return mihUsers.find(u => u.name.toLowerCase() === name.toLowerCase()) || null;
  }

  function assignMihLeague() {
    const counts = {
      amateurs: mihUsers.filter(u => u.league === "amateurs").length,
      intermediates: mihUsers.filter(u => u.league === "intermediates").length,
      pros: mihUsers.filter(u => u.league === "pros").length,
      legends: mihUsers.filter(u => u.league === "legends").length
    };
    return Object.entries(counts).sort((a, b) => a[1] - b[1])[0][0];
  }

  function mihLogin(name, password) {
    const trimmed = name.trim();
    if (!trimmed || !password) {
      alert("Please enter both name and password.");
      return false;
    }

    const existing = findMihUserByName(trimmed);
    if (existing) {
      if (existing.password !== password) {
        alert("Wrong password for this name.");
        return false;
      }
      mihCurrentUserId = existing.id;
      saveMihCurrentUser();
      renderMihUserControls();
      renderMihMyActivities();
      return true;
    }

    const league = assignMihLeague();
    const newUser = {
      id: Date.now().toString(36) + Math.random().toString(36).slice(2),
      name: trimmed,
      password,
      league,
      createdAt: Date.now()
    };

    mihUsers.push(newUser);
    saveMihUsers();
    mihCurrentUserId = newUser.id;
    saveMihCurrentUser();
    renderMihUserControls();
    renderMihMyActivities();
    return true;
  }

  function mihLogout() {
    mihCurrentUserId = null;
    saveMihCurrentUser();
    renderMihUserControls();
    renderMihMyActivities();
    renderMihLeaderboard();
  }

  function mihAddEntry(distance, time) {
    if (!mihCurrentUserId) {
      alert("Please log in first.");
      showScene("mih-login");
      return;
    }

    const d = parseFloat(distance);
    const t = parseFloat(time);

    if (!isFinite(d) || d <= 0 || !isFinite(t) || t <= 0) {
      alert("Please enter distance and time bigger than zero.");
      return;
    }

    mihEntries.push({
      id: Date.now().toString(36) + Math.random().toString(36).slice(2),
      userId: mihCurrentUserId,
      distanceKm: d,
      timeMinutes: t,
      timestamp: Date.now()
    });

    saveMihEntries();
    renderMihLeaderboard();
    renderMihMyActivities();
    renderMihStats();
  }

  // ============================================
  // MIH RENDERING
  // ============================================

  function getMihAggregatedUsers() {
    return mihUsers.map(user => {
      const runs = mihEntries.filter(e => e.userId === user.id);
      const totalDistance = runs.reduce((sum, e) => sum + e.distanceKm, 0);
      const totalTime = runs.reduce((sum, e) => sum + e.timeMinutes, 0);
      const avgDistance = runs.length ? totalDistance / runs.length : 0;
      const bestDistance = runs.length ? Math.max(...runs.map(e => e.distanceKm)) : 0;

      return {
        user,
        runs,
        totalDistance,
        totalTime,
        avgDistance,
        bestDistance
      };
    });
  }

  function renderMihUserControls() {
    const box = document.getElementById("user-controls");
    if (!box) return;

    box.innerHTML = "";

    if (!mihCurrentUserId) {
      const span = document.createElement("span");
      span.className = "text-[11px] text-gray-400";
      span.textContent = "Not logged in";
      box.appendChild(span);

      const btn = document.createElement("button");
      btn.className = "px-3 py-1 rounded-full border border-white/20 text-[11px] text-gray-300";
      btn.textContent = "Log in";
      btn.addEventListener("click", () => showScene("mih-login"));
      box.appendChild(btn);
      return;
    }

    const user = mihUsers.find(u => u.id === mihCurrentUserId);
    if (!user) return;

    const span = document.createElement("span");
    span.className = "text-[11px] text-gray-300";
    span.textContent = `Logged in as ${user.name}`;
    box.appendChild(span);

    const logoutBtn = document.createElement("button");
    logoutBtn.className = "px-3 py-1 rounded-full border border-white/20 text-[11px] text-gray-300";
    logoutBtn.textContent = "Log out";
    logoutBtn.addEventListener("click", mihLogout);
    box.appendChild(logoutBtn);
  }

  function renderMihLeaderboard() {
    const tbody = document.getElementById("leaderboard-body");
    const empty = document.getElementById("no-entries");
    if (!tbody) return;

    const leagueFilter = document.getElementById("league-filter");
    const filterValue = leagueFilter ? leagueFilter.value : "all";

    const aggregated = getMihAggregatedUsers()
      .filter(row => filterValue === "all" || row.user.league === filterValue)
      .sort((a, b) => b.totalDistance - a.totalDistance);

    tbody.innerHTML = "";

    if (!aggregated.length) {
      if (empty) empty.style.display = "block";
      return;
    }
    if (empty) empty.style.display = "none";

    aggregated.forEach((row, index) => {
      const tr = document.createElement("tr");
      tr.className = "border-b border-white/10 text-xs";

      tr.innerHTML = `
        <td class="py-2 px-2">${index + 1}</td>
        <td class="py-2 px-2">
          <button class="underline" onclick="openMihProfile('${row.user.id}')">
            ${row.user.name}
          </button>
        </td>
        <td class="py-2 px-2">${row.user.league}</td>
        <td class="py-2 px-2">${row.totalDistance.toFixed(1)} km</td>
        <td class="py-2 px-2">${row.totalTime.toFixed(1)} min</td>
      `;

      tbody.appendChild(tr);
    });
  }

  function renderMihMyActivities() {
    const tbody = document.getElementById("my-activities-body");
    const empty = document.getElementById("no-my-activities");
    if (!tbody) return;

    tbody.innerHTML = "";

    if (!mihCurrentUserId) {
      if (empty) {
        empty.textContent = "Log in to see and manage your activities.";
        empty.style.display = "block";
      }
      return;
    }

    const runs = mihEntries
      .filter(e => e.userId === mihCurrentUserId)
      .sort((a, b) => b.timestamp - a.timestamp);

    if (!runs.length) {
      if (empty) {
        empty.textContent = "No activities yet for this account.";
        empty.style.display = "block";
      }
      return;
    }
    if (empty) empty.style.display = "none";

    runs.forEach(entry => {
      const tr = document.createElement("tr");
      tr.className = "border-b border-white/10 text-xs";

      const date = new Date(entry.timestamp).toLocaleDateString();

      tr.innerHTML = `
        <td class="py-2 px-2">${date}</td>
        <td class="py-2 px-2">${entry.distanceKm.toFixed(1)} km</td>
        <td class="py-2 px-2">${entry.timeMinutes.toFixed(1)} min</td>
        <td class="py-2 px-2 text-right">
          <button class="text-red-300 underline" onclick="deleteMihEntry('${entry.id}')">
            Delete
          </button>
        </td>
      `;

      tbody.appendChild(tr);
    });
  }

  function deleteMihEntry(id) {
    mihEntries = mihEntries.filter(e => e.id !== id);
    saveMihEntries();
    renderMihMyActivities();
    renderMihLeaderboard();
    renderMihStats();
  }

  function openMihProfile(userId) {
    const user = mihUsers.find(u => u.id === userId);
    if (!user) return;

    const runs = mihEntries.filter(e => e.userId === userId);
    const totalDistance = runs.reduce((sum, e) => sum + e.distanceKm, 0);
    const totalTime = runs.reduce((sum, e) => sum + e.timeMinutes, 0);
    const runsCount = runs.length;
    const avgDistance = runsCount ? totalDistance / runsCount : 0;
    const pace = totalDistance > 0 ? totalTime / totalDistance : 0;

    function formatMinutes(mins) {
      if (!mins || !isFinite(mins)) return "–";
      const m = Math.floor(mins);
      const s = Math.round((mins - m) * 60);
      return `${m}:${s.toString().padStart(2, "0")} min`;
    }

    document.getElementById("profileName").textContent = user.name;
    document.getElementById("profileLeague").textContent = user.league;
    document.getElementById("profileTotalDistance").textContent = totalDistance.toFixed(1) + " km";
    document.getElementById("profileTotalTime").textContent = totalTime.toFixed(1) + " min";
    document.getElementById("profileRuns").textContent = runsCount.toString();
    document.getElementById("profileAvgDistance").textContent = avgDistance.toFixed(1) + " km";

    document.getElementById("profileBest5k").textContent = pace ? formatMinutes(pace * 5) : "–";
    document.getElementById("profileBest10k").textContent = pace ? formatMinutes(pace * 10) : "–";
    document.getElementById("profileBest100m").textContent = pace ? formatMinutes(pace * 0.1) : "–";

    showScene("mih-profile");
  }

  function renderMihStats() {
    const tbody = document.getElementById("stats-body");
    const empty = document.getElementById("no-stats");
    if (!tbody) return;

    const aggregated = getMihAggregatedUsers().filter(a => a.runs.length > 0);

    tbody.innerHTML = "";

    if (!aggregated.length) {
      if (empty) empty.style.display = "block";
      return;
    }
    if (empty) empty.style.display = "none";

    aggregated.forEach(row => {
      const tr = document.createElement("tr");
      tr.className = "border-b border-white/10 text-xs";

      tr.innerHTML = `
        <td class="py-2 px-2">${row.user.name}</td>
        <td class="py-2 px-2">${row.user.league}</td>
        <td class="py-2 px-2">${row.runs.length}</td>
        <td class="py-2 px-2">${row.totalDistance.toFixed(1)} km</td>
        <td class="py-2 px-2">${row.totalTime.toFixed(1)} min</td>
        <td class="py-2 px-2">${row.avgDistance.toFixed(1)} km</td>
        <td class="py-2 px-2">${row.bestDistance.toFixed(1)} km</td>
        <td class="py-2 px-2">${(row.avgDistance || 0).toFixed(1)}</td>
      `;

      tbody.appendChild(tr);
    });
  }

  // ============================================
  // FORM LISTENERS
  // ============================================

  function initForms() {
    const loginForm = document.getElementById("login-form");
    if (loginForm) {
      loginForm.addEventListener("submit", e => {
        e.preventDefault();
        const name = document.getElementById("login-name")?.value || "";
        const pw = document.getElementById("login-password")?.value || "";
        if (mihLogin(name, pw)) {
          loginForm.reset();
          showScene("mih-welcome");
        }
      });
    }

    const entryForm = document.getElementById("entry-form");
    if (entryForm) {
      entryForm.addEventListener("submit", e => {
        e.preventDefault();
        const distance = document.getElementById("distance")?.value || "";
        const time = document.getElementById("time")?.value || "";
        mihAddEntry(distance, time);
        entryForm.reset();
      });
    }

    const leagueFilter = document.getElementById("league-filter");
    if (leagueFilter) {
      leagueFilter.addEventListener("change", renderMihLeaderboard);
    }
  }

  // ============================================
  // INIT ALL
  // ============================================

  function initAll() {
    // Lang
    currentLang = detectLanguage();
    applyTranslations();
    updateLanguageButtons();

    // Nav
    initGlobalNav();

    // Cart + MobilePay
    initCart();
    initMobilePayButtons();

    // MIH
    renderMihUserControls();
    renderMihLeaderboard();
    renderMihMyActivities();
    renderMihStats();
    initForms();

    // Default scene
    showScene("sep-shop");
  }

  document.addEventListener("DOMContentLoaded", initAll);
</script>
</body>
</html>
